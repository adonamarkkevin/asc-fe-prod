{"version":3,"sources":["./src/app/modules/pages/maintenance/weekly-user-schedule/weekly-user-schedule.module.ts","./src/app/modules/pages/maintenance/weekly-user-schedule/weekly-user-schedule.component.scss","./src/app/modules/pages/maintenance/weekly-user-schedule/weekly-user-schedule.component.html","./src/app/modules/pages/maintenance/weekly-user-schedule/weekly-user-schedule.component.ts","./src/app/modules/pages/maintenance/weekly-user-schedule/weekly-user-schedule-routing.module.ts"],"names":[],"mappings":"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","file":"weekly-user-schedule-weekly-user-schedule-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { AngularMaterialModule } from '@shared';\r\nimport { FragmentsModule } from 'app/modules/fragments/fragments.module';\r\nimport { WeeklyUserScheduleComponent } from './weekly-user-schedule.component';\r\nimport { WeeklyUserScheduleRoutingModule } from './weekly-user-schedule-routing.module';\r\n\r\n@NgModule({\r\n  declarations: [WeeklyUserScheduleComponent],\r\n  imports: [\r\n    CommonModule,\r\n    WeeklyUserScheduleRoutingModule,\r\n    HttpClientModule,\r\n    ReactiveFormsModule,\r\n    AngularMaterialModule,\r\n    FragmentsModule\r\n  ]\r\n})\r\nexport class WeeklyUserScheduleModule { }\r\n","export default \".mat-calendar-body-cell.selected {\\n  background-color: #c5140c !important;\\n  border-radius: 50%;\\n}\\n\\n.drop-calendar {\\n  width: 30rem;\\n}\\n\\n.margin {\\n  margin: 10px !important;\\n  right: 0 !important;\\n  bottom: 0 !important;\\n}\\n\\n.delete-btn {\\n  float: right !important;\\n}\\n\\n.date-text {\\n  font-size: larger;\\n  margin: auto;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9wYWdlcy9tYWludGVuYW5jZS93ZWVrbHktdXNlci1zY2hlZHVsZS93ZWVrbHktdXNlci1zY2hlZHVsZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUVFLG9DQUFBO0VBQ0Esa0JBQUE7QUFBRjs7QUFFQTtFQUVFLFlBQUE7QUFBRjs7QUFHQTtFQUVFLHVCQUFBO0VBQ0EsbUJBQUE7RUFDQSxvQkFBQTtBQURGOztBQUlBO0VBQ0UsdUJBQUE7QUFERjs7QUFJQTtFQUNFLGlCQUFBO0VBQ0EsWUFBQTtBQURGIiwiZmlsZSI6InNyYy9hcHAvbW9kdWxlcy9wYWdlcy9tYWludGVuYW5jZS93ZWVrbHktdXNlci1zY2hlZHVsZS93ZWVrbHktdXNlci1zY2hlZHVsZS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tYXQtY2FsZW5kYXItYm9keS1jZWxsLnNlbGVjdGVkXHJcbntcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiNjNTE0MGMhaW1wb3J0YW50O1xyXG4gIGJvcmRlci1yYWRpdXM6IDUwJVxyXG59XHJcbi5kcm9wLWNhbGVuZGFyXHJcbntcclxuICB3aWR0aDozMHJlbVxyXG59XHJcblxyXG4ubWFyZ2luIFxyXG57XHJcbiAgbWFyZ2luOiAxMHB4ICFpbXBvcnRhbnQ7XHJcbiAgcmlnaHQ6IDAgIWltcG9ydGFudDtcclxuICBib3R0b206IDAgIWltcG9ydGFudDtcclxufVxyXG5cclxuLmRlbGV0ZS1idG4ge1xyXG4gIGZsb2F0OiByaWdodCAhaW1wb3J0YW50O1xyXG59XHJcblxyXG4uZGF0ZS10ZXh0IHtcclxuICBmb250LXNpemU6IGxhcmdlcjtcclxuICBtYXJnaW46IGF1dG87XHJcbn0iXX0= */\";","export default \"<form>\\r\\n    <div class=\\\"container-fluid\\\">\\r\\n        <div class=\\\"row\\\">\\r\\n            <div class=\\\"col-md-12 title\\\">\\r\\n                <mat-label>\\r\\n                  Weekly User Schedule\\r\\n                </mat-label>\\r\\n            </div>\\r\\n        </div>\\r\\n        <hr>\\r\\n\\r\\n        <form>\\r\\n            <div class=\\\"row\\\" *ngIf=\\\"users\\\">\\r\\n                <mat-form-field class=\\\"col-md-5\\\" appearance=\\\"outline\\\">\\r\\n                    <mat-label>ASC Internal User</mat-label>\\r\\n                    <mat-select name=\\\"status\\\">\\r\\n                      <mat-option *ngFor=\\\"let user of users\\\" [value]=\\\"user\\\" (click)=\\\"onSelectUser(user)\\\">\\r\\n                         {{user.firstName + ' ' + user.lastName}}\\r\\n                      </mat-option>\\r\\n                    </mat-select>\\r\\n                  </mat-form-field>\\r\\n\\r\\n                  <div class=\\\"col-md-5\\\" appearance=\\\"outline\\\" *ngIf=\\\"users\\\">\\r\\n                    <mat-calendar\\r\\n                        #calendar \\r\\n                        [minDate]=\\\"todayDate\\\" \\r\\n                        [hidden]=\\\"!selectedUser\\\"\\r\\n                        (selectedChange)=\\\"onCalendarUpdate($event, calendar)\\\"\\r\\n                        [dateClass]=\\\"isSelected(this)\\\"\\r\\n                    >\\r\\n                    </mat-calendar>\\r\\n                </div>\\r\\n            </div>\\r\\n        </form>\\r\\n\\r\\n        <div class=\\\"mat-elevation-z8 fields\\\">\\r\\n            <table mat-table [dataSource]=\\\"dataSource\\\" mat-sort>\\r\\n                <ng-container matColumnDef=\\\"date\\\">\\r\\n                    <th mat-header-cell *matHeaderCellDef > Date </th>\\r\\n                    <td mat-cell *matCellDef=\\\"let element\\\">\\r\\n                       <button class=\\\"button-red col-md-1 delete-btn\\\" mat-raised-button (click)=\\\"deleteDate(element?.date)\\\">Delete</button>\\r\\n                       <span class=\\\"date-text\\\">{{ convertDate(element?.date) }}</span>\\r\\n                    </td>\\r\\n                </ng-container>\\r\\n\\r\\n                <tr mat-header-row *matHeaderRowDef=\\\"displayedColumns\\\"></tr>\\r\\n                <tr mat-row *matRowDef=\\\"let row; columns: displayedColumns;\\\"></tr>\\r\\n\\r\\n            </table>\\r\\n            <div class=\\\"no-record\\\" [hidden]=\\\"selectedDates && selectedDates.length > 0\\\">\\r\\n                No record found.\\r\\n            </div>\\r\\n            <div class=\\\"col-md-12\\\">\\r\\n                <button class=\\\"button-red col-md-3 margin\\\" [hidden]=\\\"selectedDates.length === 0\\\" mat-raised-button (click)=\\\"saveSelectedDates()\\\">Save</button>\\r\\n            </div>\\r\\n        </div>\\r\\n        \";","import { ENDPOINTS } from '@shared';\r\nimport { ApiService } from '@services';\r\nimport { Component, OnInit, ViewChild, ViewEncapsulation } from '@angular/core';\r\nimport { format } from 'date-fns';\r\nimport { MatTableDataSource } from '@angular/material/table';\r\n\r\n@Component({\r\n  selector: 'app-weekly-user-schedule',\r\n  templateUrl: './weekly-user-schedule.component.html',\r\n  styleUrls: ['./weekly-user-schedule.component.scss'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class WeeklyUserScheduleComponent implements OnInit {\r\n\r\n  users: any[];\r\n  todayDate: Date;\r\n  selectedDates: any[] = [];\r\n  originalUserDates: any[] = [];\r\n  selectedUser: any;\r\n  userExistingRecord: any = null;\r\n  dataSource: MatTableDataSource<any[]>;\r\n  displayedColumns: string[] = ['date'];\r\n  @ViewChild('calendar') calendar: any;\r\n\r\n  constructor(\r\n    private apiService: ApiService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.initializeUsers();\r\n    this.todayDate = new Date();\r\n  }\r\n\r\n  onCalendarUpdate(e, calendar): void {\r\n    const date = format(e, 'yyyy-MM-dd');\r\n    if (this.originalUserDates.find(d => d === date)) {\r\n      return;\r\n    }\r\n\r\n    if (!this.selectedDates.find(e => e === date)) {\r\n      this.selectedDates.push(date);\r\n    } else {\r\n      const index = this.selectedDates.findIndex(e => e === date);\r\n      this.selectedDates.splice(index, 1);\r\n    }\r\n    this.calendar.updateTodaysDate();\r\n\r\n    this.updateDataSource();\r\n  }\r\n\r\n  onSelectUser(user): void {\r\n    this.selectedUser = user;\r\n    this.initializeUserDates(this.selectedUser);\r\n  }\r\n\r\n  isSelected(componentInstance): any {\r\n    return (date) => {\r\n      return Boolean(componentInstance.selectedDates?.find((e) => format(date, 'yyyy-MM-dd') === e)) \r\n      ? 'selected' \r\n      : null;\r\n    }\r\n  }\r\n\r\n  saveSelectedDates(): void {\r\n    const payload = {\r\n      account: this.selectedUser,\r\n      weeklyUserScheduleDates: this.convertSelectedDates(),\r\n      id: this.userExistingRecord ? this.userExistingRecord.id : null\r\n    }\r\n\r\n    if (this.userExistingRecord) {\r\n      this.apiService.update(ENDPOINTS.weeklyUserSchedule, payload).subscribe(() => {\r\n        this.initializeUserDates(this.selectedUser);\r\n      });\r\n    } else {\r\n      this.apiService.insert(ENDPOINTS.weeklyUserSchedule, { ...payload, weeklyUserScheduleDates: []}, true).subscribe((e) => {\r\n        this.apiService.update(ENDPOINTS.weeklyUserSchedule, { ...payload, id: e.responseData.data.id}).subscribe(() => {\r\n          this.initializeUserDates(this.selectedUser);\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  convertDate(date): string {\r\n    return format(new Date(date), 'MMM/dd/yyyy');\r\n  }\r\n\r\n  deleteDate(date): void {\r\n    const indexOriginal = this.originalUserDates.findIndex((e) => e === date);\r\n    if (indexOriginal !== -1) {\r\n      const id = this.userExistingRecord.weeklyUserScheduleDates\r\n        .find(e => format(new Date(e.scheduleDate), 'yyyy-MM-dd') === format(new Date(date), 'yyyy-MM-dd')).id;\r\n      this.apiService.deleteById(ENDPOINTS.weeklyScheduledUsers, id).subscribe(() => {\r\n        const index = this.userExistingRecord.weeklyUserScheduleDates.findIndex((e) => e.id === id);\r\n        this.userExistingRecord.weeklyUserScheduleDates.splice(index, 1);\r\n        this.deletionUpdate(date);\r\n        this.originalUserDates.splice(indexOriginal, 1);\r\n      });\r\n    } else {\r\n      this.deletionUpdate(date);\r\n    }\r\n  }\r\n\r\n  deletionUpdate(date): void {\r\n    const indexSelected = this.selectedDates.findIndex((e) => e === date);\r\n    this.selectedDates.splice(indexSelected, 1);\r\n    this.updateDataSource();\r\n    this.calendar.updateTodaysDate();\r\n  }\r\n\r\n  private updateDataSource(): void {\r\n    this.dataSource = new MatTableDataSource<any>(\r\n      this.selectedDates.sort((a,b) => (new Date(b).valueOf()) - (new Date(a).valueOf()) ).map((date) => ({ date }))\r\n    );\r\n  }\r\n\r\n  private convertSelectedDates(): any[] {\r\n    return this.selectedDates.map((e) => {\r\n        let originalDate = null;\r\n        if (this.userExistingRecord) {\r\n          originalDate = this.userExistingRecord.weeklyUserScheduleDates\r\n          .find((c) => format(new Date(c.scheduleDate), 'yyyy-MM-dd') === format(new Date(e), 'yyyy-MM-dd') );\r\n        }\r\n        return originalDate ?? { scheduleDate: e };\r\n    });\r\n  }\r\n\r\n  private initializeUsers(): void {\r\n    this.apiService.findAll(`${ENDPOINTS.userAccountType}/ASC_USER`).subscribe(\r\n      (res: any) => {\r\n       this.users = res.responseData.data;\r\n    });\r\n  }\r\n\r\n  private clearData(): void {\r\n    this.selectedDates = [];\r\n    this.originalUserDates = [];\r\n    this.calendar.updateTodaysDate();\r\n    this.updateDataSource();\r\n  }\r\n\r\n  private initializeUserDates(user): void {\r\n    this.clearData();\r\n    this.apiService.findAll(`${ ENDPOINTS.weeklyUserScheduleCustomSearch }?&accountId=${ user.id }`).subscribe((res) => {\r\n      if (res.data.length) {\r\n        res = res.data[0];\r\n        this.originalUserDates = res.weeklyUserScheduleDates.map((e) => format(new Date(e.scheduleDate), 'yyyy-MM-dd'));\r\n        this.selectedDates = [...this.originalUserDates];\r\n        this.userExistingRecord = res;\r\n        this.updateDataSource();\r\n        this.calendar.updateTodaysDate();\r\n      } else {\r\n        this.userExistingRecord = null;\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { WeeklyUserScheduleComponent } from './weekly-user-schedule.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: WeeklyUserScheduleComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class WeeklyUserScheduleRoutingModule { }\r\n"],"sourceRoot":"webpack:///"}