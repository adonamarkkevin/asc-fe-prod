<<<<<<< HEAD
{"version":3,"sources":["webpack:///src/app/modules/pages/maintenance/brands/brands.component.ts","webpack:///src/app/modules/pages/maintenance/brands/brands.component.html"],"names":["BrandsComponent","apiService","formBuilder","sweetAlertService","dataStorage","dialogRef","data","displayedColumns","statusList","yesNoList","brand","brandList","statusNoDisplay","isFromModal","showApproveRejectButton","isShowApproveDisapproveButtonByAdmin","userRole","getUserRole","dataForModal","dataFromModal","isUpdate","ROLE_APPLICANT","getList","setFormValidator","findAll","subscribe","res","console","log","responseData","dataSource","paginator","formListComponent","sort","endpoint","status","penalty","setBrand","save","success","setS1NewBrand","close","getS1NewBrand","resetFormValidator","err","error","findById","idForUpdate","update","ACTIVE","brandForm","group","description","required","markAsUntouched","markAsPristine","approveBrand","brandParam","value","selected","fire","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","deleteById","id","customSuccessMessage","approve","reject"],"mappings":"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","file":"default~applications-applications-module~brands-brands-module-es5.js","sourcesContent":["import { Component, Inject, OnInit, Optional, ViewChild } from '@angular/core';\r\nimport { ApiService, DataStorageService, SweetAlertService } from '@services';\r\nimport { COMMON_FUNCTION, ENDPOINTS, STATUSES, USER_ROLES, YES_NO_OPTION } from '@shared';\r\nimport { Brand } from '@models';\r\nimport { MatTableDataSource } from '@angular/material/table';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { FormListComponent } from '@fragments';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-brands',\r\n  templateUrl: './brands.component.html',\r\n  styleUrls: ['./brands.component.scss']\r\n})\r\nexport class BrandsComponent implements OnInit {\r\n\r\n  @ViewChild(FormListComponent) formListComponent: FormListComponent\r\n  dataSource: MatTableDataSource<Brand>;\r\n  displayedColumns: string[] = ['brandDesc', 'penalty', 'status'];\r\n  statusList = [...STATUSES];\r\n  yesNoList = [...YES_NO_OPTION];\r\n\r\n  brand = new Brand();\r\n  brandList = [];\r\n  // productList = [];\r\n  // categoryList = [];\r\n  statusNoDisplay = ['FOR_APPROVAL', 'DISAPPROVED', 'APPROVED'];\r\n\r\n  isFromModal = false;\r\n  showApproveRejectButton = false;\r\n  isShowApproveDisapproveButtonByAdmin = false;\r\n\r\n  userRole = '';\r\n\r\n  brandForm: FormGroup;\r\n\r\n  constructor(\r\n    private apiService: ApiService,\r\n    private formBuilder: FormBuilder,\r\n    private sweetAlertService: SweetAlertService,\r\n    private dataStorage: DataStorageService,\r\n    @Optional() public dialogRef: MatDialogRef<BrandsComponent>,\r\n    @Optional() @Inject(MAT_DIALOG_DATA) public data: any\r\n  ) {\r\n    this.userRole = this.dataStorage.getUserRole();\r\n    if (data) {\r\n      if (data.dataForModal) {\r\n        const dataFromModal = data.dataForModal;\r\n\r\n        this.isFromModal = dataFromModal.isFromModal;\r\n        this.showApproveRejectButton = dataFromModal.isUpdate;\r\n\r\n        if (dataFromModal.isUpdate) {\r\n          this.brand = dataFromModal.brand\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.userRole !== USER_ROLES.ROLE_APPLICANT) {\r\n      this.getList();\r\n    }\r\n    this.setFormValidator();\r\n    // this.getProductList();\r\n    // this.getCategoryList();\r\n  }\r\n\r\n  getList(): void {\r\n    this.apiService.findAll(ENDPOINTS.brand).subscribe((res: any) => {\r\n      console.log(res.responseData.data);\r\n      this.brandList = res.responseData.data;\r\n      this.dataSource = new MatTableDataSource<Brand>(res.responseData.data);\r\n      this.dataSource.paginator = this.formListComponent.paginator;\r\n      this.dataSource.sort = this.formListComponent.sort;\r\n    });\r\n  }\r\n\r\n  save(endpoint) {\r\n    if (this.isFromModal) {\r\n      this.brand.status = 'FOR_APPROVAL';\r\n    }\r\n\r\n    if (!endpoint) {\r\n      endpoint = ENDPOINTS.brand;\r\n    }\r\n\r\n    this.brand.penalty = this.setBrand(this.brand.penalty);\r\n\r\n    this.apiService.save(endpoint, this.brand).subscribe(\r\n      (res: any) => {\r\n        if (res) {\r\n          this.sweetAlertService.success(res);\r\n          this.dataStorage.setS1NewBrand(res.responseData.data);\r\n        }\r\n\r\n        if (this.isFromModal) {\r\n          this.dialogRef.close(this.dataStorage.getS1NewBrand());\r\n        } else {\r\n          this.resetFormValidator();\r\n          this.getList();\r\n        }\r\n      }, (err: any) => {\r\n        this.sweetAlertService.error(err);\r\n      }, () => {\r\n        // actions after subscription\r\n      });\r\n  }\r\n\r\n\r\n  getBrand(): void {\r\n    this.apiService.findById(ENDPOINTS.brand, this.formListComponent.idForUpdate).subscribe((res: any) => {\r\n      if (res) {\r\n        this.brand = res.responseData.data;\r\n        // const removeStatusDisplay = this.statusNoDisplay.includes(this.brand.status);\r\n        // this.isFromModal = removeStatusDisplay;\r\n        this.showApproveRejectButton = this.brand.status === 'FOR_APPROVAL';\r\n\r\n        this.isShowApproveDisapproveButtonByAdmin = this.brand.status === 'FOR_APPROVAL' ?\r\n          true : false;\r\n      }\r\n    });\r\n  }\r\n\r\n  // getProductList() {\r\n  //   this.apiService.findAll(ENDPOINTS.product).subscribe((res: any) => {\r\n  //     this.productList = res.responseData.data.filter((product) => product.status === COMMON_FUNCTION.ACTIVE);\r\n  //   });\r\n  // }\r\n\r\n  // getCategoryList(): void {\r\n  //   this.apiService.findAll(ENDPOINTS.category).subscribe((res: any) => {\r\n  //     this.categoryList = res.responseData.data;\r\n  //   });\r\n  // }\r\n\r\n  update(endpoint) {\r\n    if (!endpoint) {\r\n      endpoint = ENDPOINTS.brand;\r\n    }\r\n\r\n    this.brand.penalty = this.setBrand(this.brand.penalty);\r\n    this.apiService.update(endpoint, this.brand).subscribe(\r\n      (res: any) => {\r\n        if (res) {\r\n          this.sweetAlertService.success(res);\r\n          this.dataStorage.setS1NewBrand(res.responseData.data)\r\n        }\r\n\r\n        if (this.isFromModal) {\r\n          this.dialogRef.close(this.dataStorage.getS1NewBrand());\r\n        } else {\r\n          this.resetFormValidator();\r\n          this.getList();\r\n        }\r\n      }, (err: any) => {\r\n        this.sweetAlertService.error(err);\r\n      }, () => {\r\n        // actions after subscription\r\n      });\r\n  }\r\n\r\n  setFormValidator(): void {\r\n    if (!this.isFromModal) {\r\n      this.brand.status = COMMON_FUNCTION.ACTIVE;\r\n    }\r\n    this.brandForm = this.formBuilder.group({\r\n      description: ['', Validators.required],\r\n      // product: ['', Validators.required],\r\n      // category: ['', Validators.required],\r\n      status: [''],\r\n      penalty: [''],\r\n    });\r\n  }\r\n\r\n  resetFormValidator(): void {\r\n    this.brand = new Brand();\r\n    this.isShowApproveDisapproveButtonByAdmin = false;\r\n    if (!this.isFromModal) {\r\n      this.brand.status = COMMON_FUNCTION.ACTIVE;\r\n    } else {\r\n      this.showApproveRejectButton = false;\r\n      this.isFromModal = false;\r\n    }\r\n    this.brandForm.markAsUntouched();\r\n    this.brandForm.markAsPristine();\r\n  }\r\n\r\n  // compareProduct(value: any, selected: any): boolean {\r\n  //   if (value && selected) {\r\n  //     return value.description === selected.description;\r\n  //   }\r\n  // }\r\n\r\n  // compareCategory(value: any, selected: any): boolean {\r\n  //   if (value && selected) {\r\n  //     return value.description === selected.description;\r\n  //   }\r\n  // }\r\n\r\n  approve() {\r\n    this.brand.status = 'APPROVED';\r\n    this.save(ENDPOINTS.approveBrand);\r\n  }\r\n\r\n  reject() {\r\n    this.brand.status = 'DISAPPROVED';\r\n    this.update('');\r\n  }\r\n\r\n  closeModal() {\r\n    this.dialogRef.close(this.dataStorage.getS1NewBrand());\r\n  }\r\n\r\n  setBrand(brandParam): boolean {\r\n    return brandParam === 'Yes' ? true : false;\r\n  }\r\n\r\n  compareBrand(value: any, selected: any): boolean {\r\n    if (value) {\r\n      return value === (selected ? 'Yes' : 'No');\r\n    }\r\n  }\r\n\r\n  delete() {\r\n    Swal.fire({\r\n      text: 'Are you sure you want to delete this brand?',\r\n      icon: 'question',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Confirm'\r\n    }).then((result) => {\r\n      if (result.value) {\r\n        this.apiService.deleteById(ENDPOINTS.brand, this.brand.id).subscribe(\r\n          () => {\r\n            this.sweetAlertService.customSuccessMessage('Brand successfully deleted.');\r\n            this.resetFormValidator();\r\n            this.getList();\r\n          }\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n","<form>\r\n  <div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-12 title\">\r\n        <mat-label>\r\n          <mat-icon>turned_in</mat-icon> Brand\r\n        </mat-label>\r\n      </div>\r\n    </div>\r\n    <hr>\r\n\r\n    <form [formGroup]=\"brandForm\">\r\n\r\n      <div class=\"row\">\r\n        <mat-form-field class=\"col-md-10\" appearance=\"outline\">\r\n          <mat-label>Brand <span class=\"required-field\">*</span></mat-label>\r\n          <input matInput [(ngModel)]=\"brand.description\" name=\"description\" formControlName=\"description\">\r\n        </mat-form-field>\r\n\r\n        <mat-form-field class=\"col-md-2\" appearance=\"outline\" [hidden]=\"isFromModal\"\r\n        *ngIf=\"(userRole === 'ROLE_ADMIN' || userRole === 'ROLE_SUPER_ADMIN' || userRole === 'ROLE_ENCODER') && brand.id\">\r\n          <mat-label>Status</mat-label>\r\n          <mat-select [(ngModel)]=\"brand.status\" name=\"status\" formControlName=\"status\">\r\n            <mat-option *ngFor=\"let i of statusList\" [value]=\"i.status\">\r\n              {{i.status}}\r\n            </mat-option>\r\n          </mat-select>\r\n        </mat-form-field>\r\n\r\n        <!-- <mat-form-field class=\"col-md-6\" appearance=\"outline\">\r\n          <mat-label>Product <span class=\"required-field\">*</span></mat-label>\r\n          <mat-select [(ngModel)]=\"brand.product\" name=\"product\" formControlName=\"product\"\r\n            [compareWith]=\"compareProduct\">\r\n            <mat-option *ngFor=\"let i of productList\" [value]=\"i\">\r\n              {{i.description}}\r\n            </mat-option>\r\n          </mat-select>\r\n        </mat-form-field> -->\r\n\r\n        <!-- <mat-form-field class=\"col-md-6\" appearance=\"outline\">\r\n          <mat-label>Category <span class=\"required-field\">*</span></mat-label>\r\n          <mat-select [(ngModel)]=\"brand.category\" name=\"category\" formControlName=\"category\"\r\n            [compareWith]=\"compareCategory\">\r\n            <mat-option *ngFor=\"let i of categoryList\" [value]=\"i\">\r\n              {{i.description}}\r\n            </mat-option>\r\n          </mat-select>\r\n        </mat-form-field> -->\r\n\r\n        <mat-form-field class=\"col-md-2\" appearance=\"outline\" [hidden]=\"isFromModal\"\r\n         *ngIf=\"(userRole === 'ROLE_ADMIN' || userRole === 'ROLE_SUPER_ADMIN' || userRole === 'ROLE_ENCODER') && brand.id\">\r\n          <mat-label>Penalty</mat-label>\r\n          <mat-select [(ngModel)]=\"brand.penalty\" name=\"penalty\" formControlName=\"penalty\"\r\n            [compareWith]=\"compareBrand\">\r\n            <mat-option *ngFor=\"let i of yesNoList\" [value]=\"i\">\r\n              {{ i }}\r\n            </mat-option>\r\n          </mat-select>\r\n        </mat-form-field>\r\n      </div>\r\n    </form>\r\n\r\n\r\n    <form *ngIf=\"userRole==='ROLE_ACCOUNTING'\">\r\n      <div class=\"row\">\r\n        <mat-form-field class=\"col-md-8\" appearance=\"outline\">\r\n          <mat-label>Brand <span class=\"required-field\">*</span></mat-label>\r\n          <input matInput  >\r\n        </mat-form-field>\r\n        <mat-form-field class=\"col-md-4\" appearance=\"outline\">\r\n          <mat-label>Penalty Fee <span class=\"required-field\">*</span></mat-label>\r\n          <input matInput >\r\n        </mat-form-field>\r\n      </div>\r\n    </form>\r\n\r\n    <app-form-action-buttons [showApproveRejectButton]=\"showApproveRejectButton\" [isFromModal]=\"isFromModal\"\r\n      [childObject]=\"brand\" [childForm]=\"brandForm\" (saveFunction)=\"save('')\" (updateFunction)=\"update('')\"\r\n      (approveFunction)=\"approve()\" (rejectFunction)=\"reject()\" (cancelFunction)=\"resetFormValidator()\"\r\n      (deleteFunction)=\"delete()\" [isShowApproveDisapproveButton]=\"isShowApproveDisapproveButtonByAdmin\">\r\n    </app-form-action-buttons>\r\n    <br>\r\n    <ng-container *ngIf=\"(!showApproveRejectButton && !isFromModal) || userRole === 'ROLE_ADMIN' || userRole === 'ROLE_SUPER_ADMIN'\">\r\n      <app-form-list [dataSource]=\"dataSource\" [displayedColumns]=\"displayedColumns\"\r\n        (selectInListFunction)=\"getBrand()\" [hidden]=\"isFromModal\">\r\n      </app-form-list>\r\n    </ng-container>\r\n  </div>\r\n</form>\r\n"]}
=======
{"version":3,"sources":["webpack:///src/app/modules/pages/maintenance/brands/brands.component.ts","webpack:///src/app/modules/pages/maintenance/brands/brands.component.html"],"names":["BrandsComponent","apiService","formBuilder","sweetAlertService","dataStorage","dialogRef","data","displayedColumns","statusList","yesNoList","brand","brandList","statusNoDisplay","isFromModal","showApproveRejectButton","isShowApproveDisapproveButtonByAdmin","userRole","getUserRole","dataForModal","dataFromModal","isUpdate","ROLE_APPLICANT","getList","setFormValidator","findAll","subscribe","res","console","log","responseData","dataSource","paginator","formListComponent","sort","endpoint","status","penalty","setBrand","save","success","setS1NewBrand","close","getS1NewBrand","resetFormValidator","err","error","findById","idForUpdate","update","ACTIVE","brandForm","group","description","required","markAsUntouched","markAsPristine","approveBrand","brandParam","value","selected","fire","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","deleteById","id","customSuccessMessage","approve","reject"],"mappings":"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","file":"default~applications-applications-module~brands-brands-module-es5.js","sourcesContent":["import { Component, Inject, OnInit, Optional, ViewChild } from '@angular/core';\r\nimport { ApiService, DataStorageService, SweetAlertService } from '@services';\r\nimport { COMMON_FUNCTION, ENDPOINTS, STATUSES, USER_ROLES, YES_NO_OPTION } from '@shared';\r\nimport { Brand } from '@models';\r\nimport { MatTableDataSource } from '@angular/material/table';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { FormListComponent } from '@fragments';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport Swal from 'sweetalert2';\r\n\r\n@Component({\r\n  selector: 'app-brands',\r\n  templateUrl: './brands.component.html',\r\n  styleUrls: ['./brands.component.scss']\r\n})\r\nexport class BrandsComponent implements OnInit {\r\n\r\n  @ViewChild(FormListComponent) formListComponent: FormListComponent\r\n  dataSource: MatTableDataSource<Brand>;\r\n  displayedColumns: string[] = ['brandDesc', 'penalty', 'status'];\r\n  statusList = [...STATUSES];\r\n  yesNoList = [...YES_NO_OPTION];\r\n\r\n  brand = new Brand();\r\n  brandList = [];\r\n  // productList = [];\r\n  // categoryList = [];\r\n  statusNoDisplay = ['FOR_APPROVAL', 'DISAPPROVED', 'APPROVED'];\r\n\r\n  isFromModal = false;\r\n  showApproveRejectButton = false;\r\n  isShowApproveDisapproveButtonByAdmin = false;\r\n\r\n  userRole = '';\r\n\r\n  brandForm: FormGroup;\r\n\r\n  constructor(\r\n    private apiService: ApiService,\r\n    private formBuilder: FormBuilder,\r\n    private sweetAlertService: SweetAlertService,\r\n    private dataStorage: DataStorageService,\r\n    @Optional() public dialogRef: MatDialogRef<BrandsComponent>,\r\n    @Optional() @Inject(MAT_DIALOG_DATA) public data: any\r\n  ) {\r\n    this.userRole = this.dataStorage.getUserRole();\r\n    if (data) {\r\n      if (data.dataForModal) {\r\n        const dataFromModal = data.dataForModal;\r\n\r\n        this.isFromModal = dataFromModal.isFromModal;\r\n        this.showApproveRejectButton = dataFromModal.isUpdate;\r\n\r\n        if (dataFromModal.isUpdate) {\r\n          this.brand = dataFromModal.brand\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    if (this.userRole !== USER_ROLES.ROLE_APPLICANT) {\r\n      this.getList();\r\n    }\r\n    this.setFormValidator();\r\n    // this.getProductList();\r\n    // this.getCategoryList();\r\n  }\r\n\r\n  getList(): void {\r\n    this.apiService.findAll(ENDPOINTS.brand).subscribe((res: any) => {\r\n      console.log(res.responseData.data);\r\n      this.brandList = res.responseData.data;\r\n      this.dataSource = new MatTableDataSource<Brand>(res.responseData.data);\r\n      this.dataSource.paginator = this.formListComponent.paginator;\r\n      this.dataSource.sort = this.formListComponent.sort;\r\n    });\r\n  }\r\n\r\n  save(endpoint) {\r\n    if (this.isFromModal) {\r\n      this.brand.status = 'FOR_APPROVAL';\r\n    }\r\n\r\n    if (!endpoint) {\r\n      endpoint = ENDPOINTS.brand;\r\n    }\r\n\r\n    this.brand.penalty = this.setBrand(this.brand.penalty);\r\n\r\n    this.apiService.save(endpoint, this.brand).subscribe(\r\n      (res: any) => {\r\n        if (res) {\r\n          this.sweetAlertService.success(res);\r\n          this.dataStorage.setS1NewBrand(res.responseData.data);\r\n        }\r\n\r\n        if (this.isFromModal) {\r\n          this.dialogRef.close(this.dataStorage.getS1NewBrand());\r\n        } else {\r\n          this.resetFormValidator();\r\n          this.getList();\r\n        }\r\n      }, (err: any) => {\r\n        this.sweetAlertService.error(err);\r\n      }, () => {\r\n        // actions after subscription\r\n      });\r\n  }\r\n\r\n\r\n  getBrand(): void {\r\n    this.apiService.findById(ENDPOINTS.brand, this.formListComponent.idForUpdate).subscribe((res: any) => {\r\n      if (res) {\r\n        this.brand = res.responseData.data;\r\n        // const removeStatusDisplay = this.statusNoDisplay.includes(this.brand.status);\r\n        // this.isFromModal = removeStatusDisplay;\r\n        this.showApproveRejectButton = this.brand.status === 'FOR_APPROVAL';\r\n\r\n        this.isShowApproveDisapproveButtonByAdmin = this.brand.status === 'FOR_APPROVAL' ?\r\n          true : false;\r\n      }\r\n    });\r\n  }\r\n\r\n  // getProductList() {\r\n  //   this.apiService.findAll(ENDPOINTS.product).subscribe((res: any) => {\r\n  //     this.productList = res.responseData.data.filter((product) => product.status === COMMON_FUNCTION.ACTIVE);\r\n  //   });\r\n  // }\r\n\r\n  // getCategoryList(): void {\r\n  //   this.apiService.findAll(ENDPOINTS.category).subscribe((res: any) => {\r\n  //     this.categoryList = res.responseData.data;\r\n  //   });\r\n  // }\r\n\r\n  update(endpoint) {\r\n    if (!endpoint) {\r\n      endpoint = ENDPOINTS.brand;\r\n    }\r\n\r\n    this.brand.penalty = this.setBrand(this.brand.penalty);\r\n    this.apiService.update(endpoint, this.brand).subscribe(\r\n      (res: any) => {\r\n        if (res) {\r\n          this.sweetAlertService.success(res);\r\n          this.dataStorage.setS1NewBrand(res.responseData.data)\r\n        }\r\n\r\n        if (this.isFromModal) {\r\n          this.dialogRef.close(this.dataStorage.getS1NewBrand());\r\n        } else {\r\n          this.resetFormValidator();\r\n          this.getList();\r\n        }\r\n      }, (err: any) => {\r\n        this.sweetAlertService.error(err);\r\n      }, () => {\r\n        // actions after subscription\r\n      });\r\n  }\r\n\r\n  setFormValidator(): void {\r\n    if (!this.isFromModal) {\r\n      this.brand.status = COMMON_FUNCTION.ACTIVE;\r\n    }\r\n    this.brandForm = this.formBuilder.group({\r\n      description: ['', Validators.required],\r\n      // product: ['', Validators.required],\r\n      // category: ['', Validators.required],\r\n      status: [''],\r\n      penalty: [''],\r\n    });\r\n  }\r\n\r\n  resetFormValidator(): void {\r\n    this.brand = new Brand();\r\n    this.isShowApproveDisapproveButtonByAdmin = false;\r\n    if (!this.isFromModal) {\r\n      this.brand.status = COMMON_FUNCTION.ACTIVE;\r\n    } else {\r\n      this.showApproveRejectButton = false;\r\n      this.isFromModal = false;\r\n    }\r\n    this.brandForm.markAsUntouched();\r\n    this.brandForm.markAsPristine();\r\n  }\r\n\r\n  // compareProduct(value: any, selected: any): boolean {\r\n  //   if (value && selected) {\r\n  //     return value.description === selected.description;\r\n  //   }\r\n  // }\r\n\r\n  // compareCategory(value: any, selected: any): boolean {\r\n  //   if (value && selected) {\r\n  //     return value.description === selected.description;\r\n  //   }\r\n  // }\r\n\r\n  approve() {\r\n    this.brand.status = 'APPROVED';\r\n    this.save(ENDPOINTS.approveBrand);\r\n  }\r\n\r\n  reject() {\r\n    this.brand.status = 'DISAPPROVED';\r\n    this.update('');\r\n  }\r\n\r\n  closeModal() {\r\n    this.dialogRef.close(this.dataStorage.getS1NewBrand());\r\n  }\r\n\r\n  setBrand(brandParam): boolean {\r\n    return brandParam === 'Yes' ? true : false;\r\n  }\r\n\r\n  compareBrand(value: any, selected: any): boolean {\r\n    if (value) {\r\n      return value === (selected ? 'Yes' : 'No');\r\n    }\r\n  }\r\n\r\n  delete() {\r\n    Swal.fire({\r\n      text: 'Are you sure you want to delete this brand?',\r\n      icon: 'question',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Confirm'\r\n    }).then((result) => {\r\n      if (result.value) {\r\n        this.apiService.deleteById(ENDPOINTS.brand, this.brand.id).subscribe(\r\n          () => {\r\n            this.sweetAlertService.customSuccessMessage('Brand successfully deleted.');\r\n            this.resetFormValidator();\r\n            this.getList();\r\n          }\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n","<form>\r\n  <div class=\"container-fluid\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-12 title\">\r\n        <mat-label>\r\n          <mat-icon>turned_in</mat-icon> Brand\r\n        </mat-label>\r\n      </div>\r\n    </div>\r\n    <hr>\r\n\r\n    <form [formGroup]=\"brandForm\">\r\n\r\n      <div class=\"row\">\r\n        <mat-form-field class=\"col-md-10\" appearance=\"outline\">\r\n          <mat-label>Brand <span class=\"required-field\">*</span></mat-label>\r\n          <input matInput [(ngModel)]=\"brand.description\" name=\"description\" formControlName=\"description\">\r\n        </mat-form-field>\r\n\r\n        <mat-form-field class=\"col-md-2\" appearance=\"outline\" [hidden]=\"isFromModal\"\r\n        *ngIf=\"(userRole === 'ROLE_ADMIN' || userRole === 'ROLE_SUPER_ADMIN' || userRole === 'ROLE_ENCODER') && brand.id\">\r\n          <mat-label>Status</mat-label>\r\n          <mat-select [(ngModel)]=\"brand.status\" name=\"status\" formControlName=\"status\">\r\n            <mat-option *ngFor=\"let i of statusList\" [value]=\"i.status\">\r\n              {{i.status}}\r\n            </mat-option>\r\n          </mat-select>\r\n        </mat-form-field>\r\n\r\n        <!-- <mat-form-field class=\"col-md-6\" appearance=\"outline\">\r\n          <mat-label>Product <span class=\"required-field\">*</span></mat-label>\r\n          <mat-select [(ngModel)]=\"brand.product\" name=\"product\" formControlName=\"product\"\r\n            [compareWith]=\"compareProduct\">\r\n            <mat-option *ngFor=\"let i of productList\" [value]=\"i\">\r\n              {{i.description}}\r\n            </mat-option>\r\n          </mat-select>\r\n        </mat-form-field> -->\r\n\r\n        <!-- <mat-form-field class=\"col-md-6\" appearance=\"outline\">\r\n          <mat-label>Category <span class=\"required-field\">*</span></mat-label>\r\n          <mat-select [(ngModel)]=\"brand.category\" name=\"category\" formControlName=\"category\"\r\n            [compareWith]=\"compareCategory\">\r\n            <mat-option *ngFor=\"let i of categoryList\" [value]=\"i\">\r\n              {{i.description}}\r\n            </mat-option>\r\n          </mat-select>\r\n        </mat-form-field> -->\r\n\r\n        <mat-form-field class=\"col-md-2\" appearance=\"outline\" [hidden]=\"isFromModal\"\r\n         *ngIf=\"(userRole === 'ROLE_ADMIN' || userRole === 'ROLE_SUPER_ADMIN' || userRole === 'ROLE_ENCODER') && brand.id\">\r\n          <mat-label>Penalty</mat-label>\r\n          <mat-select [(ngModel)]=\"brand.penalty\" name=\"penalty\" formControlName=\"penalty\"\r\n            [compareWith]=\"compareBrand\">\r\n            <mat-option *ngFor=\"let i of yesNoList\" [value]=\"i\">\r\n              {{ i }}\r\n            </mat-option>\r\n          </mat-select>\r\n        </mat-form-field>\r\n      </div>\r\n    </form>\r\n\r\n\r\n    <form *ngIf=\"userRole==='ROLE_ACCOUNTING'\">\r\n      <div class=\"row\">\r\n        <mat-form-field class=\"col-md-8\" appearance=\"outline\">\r\n          <mat-label>Brand <span class=\"required-field\">*</span></mat-label>\r\n          <input matInput  >\r\n        </mat-form-field>\r\n        <mat-form-field class=\"col-md-4\" appearance=\"outline\">\r\n          <mat-label>Penalty Fee <span class=\"required-field\">*</span></mat-label>\r\n          <input matInput >\r\n        </mat-form-field>\r\n      </div>\r\n    </form>\r\n\r\n    <app-form-action-buttons [showApproveRejectButton]=\"showApproveRejectButton\" [isFromModal]=\"isFromModal\"\r\n      [childObject]=\"brand\" [childForm]=\"brandForm\" (saveFunction)=\"save('')\" (updateFunction)=\"update('')\"\r\n      (approveFunction)=\"approve()\" (rejectFunction)=\"reject()\" (cancelFunction)=\"resetFormValidator()\"\r\n      (deleteFunction)=\"delete()\" [isShowApproveDisapproveButton]=\"isShowApproveDisapproveButtonByAdmin\">\r\n    </app-form-action-buttons>\r\n    <br>\r\n    <ng-container *ngIf=\"(!showApproveRejectButton && !isFromModal) || userRole === 'ROLE_ADMIN' || userRole === 'ROLE_SUPER_ADMIN'\">\r\n      <app-form-list [dataSource]=\"dataSource\" [displayedColumns]=\"displayedColumns\"\r\n        (selectInListFunction)=\"getBrand()\" [hidden]=\"isFromModal\">\r\n      </app-form-list>\r\n    </ng-container>\r\n  </div>\r\n</form>\r\n"]}
>>>>>>> 53dc5baaa640736d2cc27f9eee7c34fe4a9274c2
