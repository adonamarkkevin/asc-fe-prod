{"version":3,"sources":["webpack:///src/app/modules/pages/applications/editor/lib/angular-editor.component.ts","webpack:///src/app/modules/pages/applications/editor/lib/angular-editor.component.html","webpack:///src/app/modules/pages/applications/editor/lib/ae-select/ae-select.component.ts","webpack:///src/app/modules/pages/applications/editor/lib/ae-select/ae-select.component.html","webpack:///src/app/modules/pages/applications/editor/lib/angular-editor-toolbar.component.ts","webpack:///src/app/modules/pages/applications/editor/lib/angular-editor-toolbar.component.html","webpack:///src/app/modules/pages/applications/editor/lib/angular-editor.service.ts","webpack:///src/app/modules/pages/applications/editor/lib/ae-toolbar-set/ae-toolbar-set.component.ts","webpack:///src/app/modules/pages/applications/editor/lib/ae-toolbar-set/ae-toolbar-set.component.html","webpack:///src/app/modules/pages/applications/editor/lib/ae-button/ae-button.component.ts","webpack:///src/app/modules/pages/applications/editor/lib/ae-button/ae-button.component.html","webpack:///src/app/modules/pages/applications/editor/lib/config.ts","webpack:///src/app/modules/pages/applications/editor/lib/utils.ts","webpack:///src/app/modules/pages/applications/editor/lib/angular-editor.module.ts"],"names":["AngularEditorComponent","r","editorService","doc","sanitizer","cdRef","defaultTabIndex","autoFocus","modeVisual","showPlaceholder","disabled","focused","touched","changed","id","config","placeholder","executeCommandFn","executeCommand","bind","viewMode","blurEvent","focusEvent","tabindex","parsedTabIndex","Number","tabIndex","focus","toolbarPosition","event","rawPaste","preventDefault","text","clipboardData","getData","document","execCommand","command","value","toggleEditorMode","removeSelectedElements","getCustomTags","onContentChange","textArea","nativeElement","exec","stopPropagation","emit","executeInNextQueueIteration","configure","saveSelection","onTouched","relatedTarget","parent","parentElement","classList","contains","sourceText","getElementById","element","html","innerHTML","innerText","onChange","sanitize","undefined","HTML","togglePlaceholder","fn","e","refreshView","normalizedValue","setProperty","addClass","editorWrapper","removeClass","isDisabled","div","action","bToSource","oContent","editableElement","createText","oPre","createElement","setStyle","oCode","appendChild","focusInstance","listen","onTextAreaFocus","blurInstance","onTextAreaBlur","querySelectorAll","createRange","selectNodeContents","firstChild","toString","editorToolbar","setEditorMode","triggerButtons","userSelection","getSelection","a","focusNode","els","unshift","parentNode","triggerBlocks","uploadUrl","uploadWithCredentials","defaultParagraphSeparator","setDefaultParagraphSeparator","defaultFontName","setFontName","defaultFontSize","setFontSize","fonts","map","x","label","name","tags","customClasses","forEach","tag","includes","push","join","replace","provide","useExisting","multi","onTextAreaMouseOut","onPaste","AeSelectComponent","elRef","options","optionId","opened","hidden","changeEvent","selectedOption","hasOwnProperty","isHidden","hide","option","setValue","$event","target","close","index","selectedEl","find","el","i","labelButton","key","_handleArrowDown","_handleArrowUp","_handleSpace","_handleEnter","_handleTab","_handleBackspace","length","optionSelect","toggleOpen","AngularEditorToolbarComponent","er","htmlMode","linkSelected","block","fontName","fontSize","headings","fontSizes","customClassId","customClassList","tagMap","BLOCKQUOTE","A","select","buttons","execute","classes","_customClasses","Boolean","selectedText","showToolbar","result","queryCommandState","elementById","nodes","findIndex","nodeName","found","y","node","toLowerCase","Element","className","Object","keys","foreColour","queryCommandValue","backColor","url","selection","savedSelection","commonAncestorContainer","href","prompt","createLink","insertVideo","color","where","insertColor","foreColor","m","toggleEditorModeButton","file","files","type","upload","subscribe","response","watchUploadImage","uploadImage","reader","FileReader","onload","fr","currentTarget","insertImage","readAsDataURL","imageUrl","body","srcElement","classId","createCustomClass","hiddenButtons","Array","arr","item","console","log","AngularEditorService","http","sel","getRangeAt","rangeCount","commands","newUrl","insertHtml","restored","restoreSelection","isHTMLInserted","Error","removeAllRanges","addRange","callbackFn","timeout","setTimeout","uploadData","FormData","append","post","reportProgress","observe","withCredentials","separator","customClass","newTag","tagName","videoUrl","match","insertYouTubeVideoTag","insertVimeoVideoTag","split","thumbnail","sub","get","data","thumbnail_url_with_play_button","title","unsubscribe","hasChildNodes","nextSibling","range","includePartiallySelectedContainers","startContainer","endNode","endContainer","rangeNodes","nextNode","len","apply","getRangeSelectedNodes","insertBefore","removeChild","tagNames","tagNamesArray","getSelectedNodes","nodeType","indexOf","replaceWithOwnChildren","AeToolbarSetComponent","AeButtonComponent","iconClass","buttonClick","angularEditorConfig","editable","spellcheck","height","minHeight","maxHeight","width","minWidth","translate","enableToolbar","outline","isDefined","CustomAngularEditorModule"],"mappings":"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","file":"default~applications-applications-module~email-notification-email-notification-module-es5.js","sourcesContent":["import {\r\n  AfterViewInit,\r\n  Attribute,\r\n  ChangeDetectorRef,\r\n  Component, ContentChild,\r\n  ElementRef,\r\n  EventEmitter,\r\n  forwardRef,\r\n  HostBinding,\r\n  HostListener,\r\n  Inject,\r\n  Input,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  Renderer2,\r\n  SecurityContext, TemplateRef,\r\n  ViewChild\r\n} from '@angular/core';\r\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\r\nimport {AngularEditorConfig, angularEditorConfig} from './config';\r\nimport {AngularEditorToolbarComponent} from './angular-editor-toolbar.component';\r\nimport {AngularEditorService} from './angular-editor.service';\r\nimport {DOCUMENT} from '@angular/common';\r\nimport {DomSanitizer} from '@angular/platform-browser';\r\nimport {isDefined} from './utils';\r\n\r\n@Component({\r\n  selector: 'angular-editor',\r\n  templateUrl: './angular-editor.component.html',\r\n  styleUrls: ['./angular-editor.component.scss'],\r\n  providers: [\r\n    {\r\n      provide: NG_VALUE_ACCESSOR,\r\n      useExisting: forwardRef(() => AngularEditorComponent),\r\n      multi: true\r\n    },\r\n    AngularEditorService\r\n  ]\r\n})\r\nexport class AngularEditorComponent implements OnInit, ControlValueAccessor, AfterViewInit, OnDestroy {\r\n\r\n  private onChange: (value: string) => void;\r\n  private onTouched: () => void;\r\n\r\n  modeVisual = true;\r\n  showPlaceholder = false;\r\n  disabled = false;\r\n  focused = false;\r\n  touched = false;\r\n  changed = false;\r\n\r\n  focusInstance: any;\r\n  blurInstance: any;\r\n\r\n  @Input() id = '';\r\n  @Input() config: AngularEditorConfig = angularEditorConfig;\r\n  @Input() placeholder = '';\r\n  @Input() tabIndex: number | null;\r\n\r\n  @Output() html;\r\n\r\n  @ViewChild('editor', {static: true}) textArea: ElementRef;\r\n  @ViewChild('editorWrapper', {static: true}) editorWrapper: ElementRef;\r\n  @ViewChild('editorToolbar') editorToolbar: AngularEditorToolbarComponent;\r\n  @ContentChild(\"customButtons\") customButtonsTemplateRef?: TemplateRef<any>;\r\n  executeCommandFn = this.executeCommand.bind(this);\r\n\r\n  @Output() viewMode = new EventEmitter<boolean>();\r\n\r\n  /** emits `blur` event when focused out from the textarea */\r\n    // eslint-disable-next-line @angular-eslint/no-output-native, @angular-eslint/no-output-rename\r\n  @Output('blur') blurEvent: EventEmitter<FocusEvent> = new EventEmitter<FocusEvent>();\r\n\r\n  /** emits `focus` event when focused in to the textarea */\r\n    // eslint-disable-next-line @angular-eslint/no-output-rename, @angular-eslint/no-output-native\r\n  @Output('focus') focusEvent: EventEmitter<FocusEvent> = new EventEmitter<FocusEvent>();\r\n\r\n  @HostBinding('attr.tabindex') tabindex = -1;\r\n\r\n  @HostListener('focus')\r\n  onFocus() {\r\n    this.focus();\r\n  }\r\n\r\n  constructor(\r\n    private r: Renderer2,\r\n    private editorService: AngularEditorService,\r\n    @Inject(DOCUMENT) private doc: any,\r\n    private sanitizer: DomSanitizer,\r\n    private cdRef: ChangeDetectorRef,\r\n    @Attribute('tabindex') defaultTabIndex: string,\r\n    @Attribute('autofocus') private autoFocus: any\r\n  ) {\r\n    const parsedTabIndex = Number(defaultTabIndex);\r\n    this.tabIndex = (parsedTabIndex || parsedTabIndex === 0) ? parsedTabIndex : null;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.config.toolbarPosition = this.config.toolbarPosition ? this.config.toolbarPosition : angularEditorConfig.toolbarPosition;\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (isDefined(this.autoFocus)) {\r\n      this.focus();\r\n    }\r\n  }\r\n\r\n  onPaste(event: ClipboardEvent){\r\n    if (this.config.rawPaste) {\r\n      event.preventDefault();\r\n      const text = event.clipboardData.getData('text/plain');\r\n      document.execCommand('insertHTML', false, text);\r\n      return text;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Executed command from editor header buttons\r\n   * @param command string from triggerCommand\r\n   * @param value\r\n   */\r\n  executeCommand(command: string, value?: string) {\r\n    this.focus();\r\n    if (command === 'focus') {\r\n      return;\r\n    }\r\n    if (command === 'toggleEditorMode') {\r\n      this.toggleEditorMode(this.modeVisual);\r\n    } else if (command !== '') {\r\n      if (command === 'clear') {\r\n        this.editorService.removeSelectedElements(this.getCustomTags());\r\n        this.onContentChange(this.textArea.nativeElement);\r\n      } else if (command === 'default') {\r\n        this.editorService.removeSelectedElements('h1,h2,h3,h4,h5,h6,p,pre');\r\n        this.onContentChange(this.textArea.nativeElement);\r\n      } else {\r\n        this.editorService.executeCommand(command, value);\r\n      }\r\n      this.exec();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * focus event\r\n   */\r\n  onTextAreaFocus(event: FocusEvent): void {\r\n    if (this.focused) {\r\n      event.stopPropagation();\r\n      return;\r\n    }\r\n    this.focused = true;\r\n    this.focusEvent.emit(event);\r\n    if (!this.touched || !this.changed) {\r\n      this.editorService.executeInNextQueueIteration(() => {\r\n        this.configure();\r\n        this.touched = true;\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description fires when cursor leaves textarea\r\n   */\r\n  public onTextAreaMouseOut(event: MouseEvent): void {\r\n    this.editorService.saveSelection();\r\n  }\r\n\r\n  /**\r\n   * blur event\r\n   */\r\n  onTextAreaBlur(event: FocusEvent) {\r\n    /**\r\n     * save selection if focussed out\r\n     */\r\n    this.editorService.executeInNextQueueIteration(this.editorService.saveSelection);\r\n\r\n    if (typeof this.onTouched === 'function') {\r\n      this.onTouched();\r\n    }\r\n\r\n    if (event.relatedTarget !== null) {\r\n      const parent = (event.relatedTarget as HTMLElement).parentElement;\r\n      if (!parent.classList.contains('angular-editor-toolbar-set') && !parent.classList.contains('ae-picker')) {\r\n        this.blurEvent.emit(event);\r\n        this.focused = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  focus the text area when the editor is focused\r\n   */\r\n  focus() {\r\n    if (this.modeVisual) {\r\n      this.textArea.nativeElement.focus();\r\n    } else {\r\n      const sourceText = this.doc.getElementById('sourceText' + this.id);\r\n      sourceText.focus();\r\n      this.focused = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Executed from the contenteditable section while the input property changes\r\n   * @param element html element from contenteditable\r\n   */\r\n  onContentChange(element: HTMLElement): void {\r\n    let html = '';\r\n    if (this.modeVisual) {\r\n      html = element.innerHTML;\r\n    } else {\r\n      html = element.innerText;\r\n    }\r\n    if ((!html || html === '<br>')) {\r\n      html = '';\r\n    }\r\n    if (typeof this.onChange === 'function') {\r\n      this.onChange(this.config.sanitize || this.config.sanitize === undefined ?\r\n        this.sanitizer.sanitize(SecurityContext.HTML, html) : html);\r\n      if ((!html) !== this.showPlaceholder) {\r\n        this.togglePlaceholder(this.showPlaceholder);\r\n      }\r\n    }\r\n    this.changed = true;\r\n  }\r\n\r\n  /**\r\n   * Set the function to be called\r\n   * when the control receives a change event.\r\n   *\r\n   * @param fn a function\r\n   */\r\n  registerOnChange(fn: any): void {\r\n    this.onChange = e => (e === '<br>' ? fn('') : fn(e)) ;\r\n  }\r\n\r\n  /**\r\n   * Set the function to be called\r\n   * when the control receives a touch event.\r\n   *\r\n   * @param fn a function\r\n   */\r\n  registerOnTouched(fn: any): void {\r\n    this.onTouched = fn;\r\n  }\r\n\r\n  /**\r\n   * Write a new value to the element.\r\n   *\r\n   * @param value value to be executed when there is a change in contenteditable\r\n   */\r\n  writeValue(value: any): void {\r\n\r\n    if ((!value || value === '<br>' || value === '') !== this.showPlaceholder) {\r\n      this.togglePlaceholder(this.showPlaceholder);\r\n    }\r\n\r\n    if (value === undefined || value === '' || value === '<br>') {\r\n      value = null;\r\n    }\r\n\r\n    this.refreshView(value);\r\n  }\r\n\r\n  /**\r\n   * refresh view/HTML of the editor\r\n   *\r\n   * @param value html string from the editor\r\n   */\r\n  refreshView(value: string): void {\r\n    const normalizedValue = value === null ? '' : value;\r\n    this.r.setProperty(this.textArea.nativeElement, 'innerHTML', normalizedValue);\r\n\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * toggles placeholder based on input string\r\n   *\r\n   * @param value A HTML string from the editor\r\n   */\r\n  togglePlaceholder(value: boolean): void {\r\n    if (!value) {\r\n      this.r.addClass(this.editorWrapper.nativeElement, 'show-placeholder');\r\n      this.showPlaceholder = true;\r\n\r\n    } else {\r\n      this.r.removeClass(this.editorWrapper.nativeElement, 'show-placeholder');\r\n      this.showPlaceholder = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Implements disabled state for this element\r\n   *\r\n   * @param isDisabled Disabled flag\r\n   */\r\n  setDisabledState(isDisabled: boolean): void {\r\n    const div = this.textArea.nativeElement;\r\n    const action = isDisabled ? 'addClass' : 'removeClass';\r\n    this.r[action](div, 'disabled');\r\n    this.disabled = isDisabled;\r\n  }\r\n\r\n  /**\r\n   * toggles editor mode based on bToSource bool\r\n   *\r\n   * @param bToSource A boolean value from the editor\r\n   */\r\n  toggleEditorMode(bToSource: boolean) {\r\n    let oContent: any;\r\n    const editableElement = this.textArea.nativeElement;\r\n\r\n    if (bToSource) {\r\n      oContent = this.r.createText(editableElement.innerHTML);\r\n      this.r.setProperty(editableElement, 'innerHTML', '');\r\n      this.r.setProperty(editableElement, 'contentEditable', false);\r\n\r\n      const oPre = this.r.createElement('pre');\r\n      this.r.setStyle(oPre, 'margin', '0');\r\n      this.r.setStyle(oPre, 'outline', 'none');\r\n\r\n      const oCode = this.r.createElement('code');\r\n      this.r.setProperty(oCode, 'id', 'sourceText' + this.id);\r\n      this.r.setStyle(oCode, 'display', 'block');\r\n      this.r.setStyle(oCode, 'white-space', 'pre-wrap');\r\n      this.r.setStyle(oCode, 'word-break', 'keep-all');\r\n      this.r.setStyle(oCode, 'outline', 'none');\r\n      this.r.setStyle(oCode, 'margin', '0');\r\n      this.r.setStyle(oCode, 'background-color', '#fff5b9');\r\n      this.r.setProperty(oCode, 'contentEditable', true);\r\n      this.r.appendChild(oCode, oContent);\r\n      this.focusInstance = this.r.listen(oCode, 'focus', (event) => this.onTextAreaFocus(event));\r\n      this.blurInstance = this.r.listen(oCode, 'blur', (event) => this.onTextAreaBlur(event));\r\n      this.r.appendChild(oPre, oCode);\r\n      this.r.appendChild(editableElement, oPre);\r\n\r\n      // ToDo move to service\r\n      this.doc.execCommand('defaultParagraphSeparator', false, 'div');\r\n\r\n      this.modeVisual = false;\r\n      this.viewMode.emit(false);\r\n      oCode.focus();\r\n    } else {\r\n      if (this.doc.querySelectorAll) {\r\n        this.r.setProperty(editableElement, 'innerHTML', editableElement.innerText);\r\n      } else {\r\n        oContent = this.doc.createRange();\r\n        oContent.selectNodeContents(editableElement.firstChild);\r\n        this.r.setProperty(editableElement, 'innerHTML', oContent.toString());\r\n      }\r\n      this.r.setProperty(editableElement, 'contentEditable', true);\r\n      this.modeVisual = true;\r\n      this.viewMode.emit(true);\r\n      this.onContentChange(editableElement);\r\n      editableElement.focus();\r\n    }\r\n    this.editorToolbar.setEditorMode(!this.modeVisual);\r\n  }\r\n\r\n  /**\r\n   * toggles editor buttons when cursor moved or positioning\r\n   *\r\n   * Send a node array from the contentEditable of the editor\r\n   */\r\n  exec() {\r\n    this.editorToolbar.triggerButtons();\r\n\r\n    let userSelection;\r\n    if (this.doc.getSelection) {\r\n      userSelection = this.doc.getSelection();\r\n      this.editorService.executeInNextQueueIteration(this.editorService.saveSelection);\r\n    }\r\n\r\n    let a = userSelection.focusNode;\r\n    const els = [];\r\n    while (a && a.id !== 'editor') {\r\n      els.unshift(a);\r\n      a = a.parentNode;\r\n    }\r\n    this.editorToolbar.triggerBlocks(els);\r\n  }\r\n\r\n  private configure() {\r\n    this.editorService.uploadUrl = this.config.uploadUrl;\r\n    this.editorService.uploadWithCredentials = this.config.uploadWithCredentials;\r\n    if (this.config.defaultParagraphSeparator) {\r\n      this.editorService.setDefaultParagraphSeparator(this.config.defaultParagraphSeparator);\r\n    }\r\n    if (this.config.defaultFontName) {\r\n      this.editorService.setFontName(this.config.defaultFontName);\r\n    }\r\n    if (this.config.defaultFontSize) {\r\n      this.editorService.setFontSize(this.config.defaultFontSize);\r\n    }\r\n  }\r\n\r\n  getFonts() {\r\n    const fonts = this.config.fonts ? this.config.fonts : angularEditorConfig.fonts;\r\n    return fonts.map(x => {\r\n      return {label: x.name, value: x.name};\r\n    });\r\n  }\r\n\r\n  getCustomTags() {\r\n    const tags = ['span'];\r\n    this.config.customClasses.forEach(x => {\r\n      if (x.tag !== undefined) {\r\n        if (!tags.includes(x.tag)) {\r\n          tags.push(x.tag);\r\n        }\r\n      }\r\n    });\r\n    return tags.join(',');\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.blurInstance) {\r\n      this.blurInstance();\r\n    }\r\n    if (this.focusInstance) {\r\n      this.focusInstance();\r\n    }\r\n  }\r\n\r\n  filterStyles(html: string): string {\r\n    html = html.replace('position: fixed;', '');\r\n    return html;\r\n  }\r\n}\r\n","<div\r\n     class=\"angular-editor\"\r\n     #angularEditor\r\n     [style.width]=\"config.width\"\r\n     [style.minWidth]=\"config.minWidth\"\r\n>\r\n     <angular-editor-toolbar\r\n          *ngIf=\"config.toolbarPosition === 'top'\"\r\n          #editorToolbar\r\n          [id]=\"id\"\r\n          [uploadUrl]=\"config.uploadUrl\"\r\n          [upload]=\"config.upload\"\r\n          [showToolbar]=\"config.showToolbar !== undefined ? config.showToolbar : true\"\r\n          [fonts]=\"getFonts()\"\r\n          [customClasses]=\"config.customClasses\"\r\n          [defaultFontName]=\"config.defaultFontName\"\r\n          [defaultFontSize]=\"config.defaultFontSize\"\r\n          [hiddenButtons]=\"config.toolbarHiddenButtons\"\r\n          (execute)=\"executeCommand($event)\"\r\n     >\r\n       <ng-container\r\n         [ngTemplateOutlet]=\"customButtonsTemplateRef\"\r\n         [ngTemplateOutletContext]=\"{ executeCommandFn: this.executeCommandFn}\"\r\n       >\r\n       </ng-container>\r\n     </angular-editor-toolbar>\r\n\r\n     <div\r\n          class=\"angular-editor-wrapper\"\r\n          #editorWrapper\r\n     >\r\n          <div\r\n               #editor\r\n               class=\"angular-editor-textarea\"\r\n               [attr.contenteditable]=\"config.editable\"\r\n               [attr.tabindex]=\"disabled ? -1 : tabIndex\"\r\n               [attr.translate]=\"config.translate\"\r\n               [attr.spellcheck]=\"config.spellcheck\"\r\n               [style.height]=\"config.height\"\r\n               [style.minHeight]=\"config.minHeight\"\r\n               [style.maxHeight]=\"config.maxHeight\"\r\n               [style.outline]=\"config.outline === false ? 'none': undefined\"\r\n               (input)=\"onContentChange($event.target)\"\r\n               (focus)=\"onTextAreaFocus($event)\"\r\n               (blur)=\"onTextAreaBlur($event)\"\r\n               (click)=\"exec()\"\r\n               (keyup)=\"exec()\"\r\n               (mouseout)=\"onTextAreaMouseOut($event)\"\r\n               (paste)=\"onPaste($event)\"\r\n          >\r\n          </div>\r\n          <span class=\"angular-editor-placeholder\">{{ placeholder || config['placeholder'] }}</span>\r\n     </div>\r\n     <angular-editor-toolbar\r\n          *ngIf=\"config.toolbarPosition === 'bottom'\"\r\n          #editorToolbar\r\n          [id]=\"id\"\r\n          [uploadUrl]=\"config.uploadUrl\"\r\n          [upload]=\"config.upload\"\r\n          [showToolbar]=\"config.showToolbar !== undefined ? config.showToolbar : true\"\r\n          [fonts]=\"getFonts()\"\r\n          [customClasses]=\"config.customClasses\"\r\n          [defaultFontName]=\"config.defaultFontName\"\r\n          [defaultFontSize]=\"config.defaultFontSize\"\r\n          [hiddenButtons]=\"config.toolbarHiddenButtons\"\r\n          (execute)=\"executeCommand($event)\"\r\n     ></angular-editor-toolbar>\r\n</div>\r\n","import {\r\n  Attribute,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  forwardRef, HostBinding,\r\n  HostListener,\r\n  Input,\r\n  OnInit,\r\n  Output,\r\n  Renderer2,\r\n  ViewChild,\r\n  ViewEncapsulation\r\n} from '@angular/core';\r\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\r\nimport {isDefined} from '../utils';\r\n\r\nexport interface SelectOption {\r\n  label: string;\r\n  value: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'ae-select',\r\n  templateUrl: './ae-select.component.html',\r\n  styleUrls: ['./ae-select.component.scss'],\r\n  encapsulation: ViewEncapsulation.None,\r\n  providers: [\r\n    {\r\n      provide: NG_VALUE_ACCESSOR,\r\n      useExisting: forwardRef(() => AeSelectComponent),\r\n      multi: true,\r\n    }\r\n  ]\r\n})\r\nexport class AeSelectComponent implements OnInit, ControlValueAccessor {\r\n  @Input() options: SelectOption[] = [];\r\n  // eslint-disable-next-line @angular-eslint/no-input-rename\r\n  @Input('hidden') isHidden: boolean;\r\n\r\n  selectedOption: SelectOption;\r\n  disabled = false;\r\n  optionId = 0;\r\n\r\n  get label(): string {\r\n    return this.selectedOption && this.selectedOption.hasOwnProperty('label') ? this.selectedOption.label : 'Select';\r\n  }\r\n\r\n  opened = false;\r\n\r\n  get value(): string {\r\n    return this.selectedOption.value;\r\n  }\r\n\r\n  @HostBinding('style.display') hidden = 'inline-block';\r\n\r\n  // eslint-disable-next-line @angular-eslint/no-output-native, @angular-eslint/no-output-rename\r\n  @Output('change') changeEvent = new EventEmitter();\r\n\r\n  @ViewChild('labelButton', {static: true}) labelButton: ElementRef;\r\n\r\n  constructor(private elRef: ElementRef,\r\n              private r: Renderer2,\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.selectedOption = this.options[0];\r\n    if (isDefined(this.isHidden) && this.isHidden) {\r\n      this.hide();\r\n    }\r\n  }\r\n\r\n  hide() {\r\n    this.hidden = 'none';\r\n  }\r\n\r\n  optionSelect(option: SelectOption, event: MouseEvent) {\r\n    event.stopPropagation();\r\n    this.setValue(option.value);\r\n    this.onChange(this.selectedOption.value);\r\n    this.changeEvent.emit(this.selectedOption.value);\r\n    this.onTouched();\r\n    this.opened = false;\r\n  }\r\n\r\n  toggleOpen(event: MouseEvent) {\r\n    // event.stopPropagation();\r\n    if (this.disabled) {\r\n      return;\r\n    }\r\n    this.opened = !this.opened;\r\n  }\r\n\r\n  @HostListener('document:click', ['$event'])\r\n  onClick($event: MouseEvent) {\r\n    if (!this.elRef.nativeElement.contains($event.target)) {\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  close() {\r\n    this.opened = false;\r\n  }\r\n\r\n  get isOpen(): boolean {\r\n    return this.opened;\r\n  }\r\n\r\n  writeValue(value) {\r\n    if (!value || typeof value !== 'string') {\r\n      return;\r\n    }\r\n    this.setValue(value);\r\n  }\r\n\r\n  setValue(value) {\r\n    let index = 0;\r\n    const selectedEl = this.options.find((el, i) => {\r\n      index = i;\r\n      return el.value === value;\r\n    });\r\n    if (selectedEl) {\r\n      this.selectedOption = selectedEl;\r\n      this.optionId = index;\r\n    }\r\n  }\r\n\r\n  onChange: any = () => {\r\n  }\r\n  onTouched: any = () => {\r\n  }\r\n\r\n  registerOnChange(fn) {\r\n    this.onChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn) {\r\n    this.onTouched = fn;\r\n  }\r\n\r\n  setDisabledState(isDisabled: boolean): void {\r\n    this.labelButton.nativeElement.disabled = isDisabled;\r\n    const div = this.labelButton.nativeElement;\r\n    const action = isDisabled ? 'addClass' : 'removeClass';\r\n    this.r[action](div, 'disabled');\r\n    this.disabled = isDisabled;\r\n  }\r\n\r\n  @HostListener('keydown', ['$event'])\r\n  handleKeyDown($event: KeyboardEvent) {\r\n    if (!this.opened) {\r\n      return;\r\n    }\r\n    // console.log($event.key);\r\n    // if (KeyCode[$event.key]) {\r\n    switch ($event.key) {\r\n      case 'ArrowDown':\r\n        this._handleArrowDown($event);\r\n        break;\r\n      case 'ArrowUp':\r\n        this._handleArrowUp($event);\r\n        break;\r\n      case 'Space':\r\n        this._handleSpace($event);\r\n        break;\r\n      case 'Enter':\r\n        this._handleEnter($event);\r\n        break;\r\n      case 'Tab':\r\n        this._handleTab($event);\r\n        break;\r\n      case 'Escape':\r\n        this.close();\r\n        $event.preventDefault();\r\n        break;\r\n      case 'Backspace':\r\n        this._handleBackspace();\r\n        break;\r\n    }\r\n    // } else if ($event.key && $event.key.length === 1) {\r\n    // this._keyPress$.next($event.key.toLocaleLowerCase());\r\n    // }\r\n  }\r\n\r\n  _handleArrowDown($event) {\r\n    if (this.optionId < this.options.length - 1) {\r\n      this.optionId++;\r\n    }\r\n  }\r\n\r\n  _handleArrowUp($event) {\r\n    if (this.optionId >= 1) {\r\n      this.optionId--;\r\n    }\r\n  }\r\n\r\n  _handleSpace($event) {\r\n\r\n  }\r\n\r\n  _handleEnter($event) {\r\n    this.optionSelect(this.options[this.optionId], $event);\r\n  }\r\n\r\n  _handleTab($event) {\r\n\r\n  }\r\n\r\n  _handleBackspace() {\r\n\r\n  }\r\n}\r\n","<span class=\"ae-font ae-picker\" [ngClass]=\"{'ae-expanded':isOpen}\">\r\n  <button [tabIndex]=\"-1\" #labelButton tabindex=\"0\" type=\"button\" role=\"button\" class=\"ae-picker-label\" (click)=\"toggleOpen($event);\">{{label}}\r\n    <svg viewBox=\"0 0 18 18\">\r\n     <!-- <use x=\"0\" y=\"0\" xlink:href=\"../assets/icons.svg#hom\"></use>-->\r\n      <polygon class=\"ae-stroke\" points=\"7 11 9 13 11 11 7 11\"></polygon>\r\n      <polygon class=\"ae-stroke\" points=\"7 7 9 5 11 7 7 7\"></polygon>\r\n    </svg>\r\n  </button>\r\n  <span class=\"ae-picker-options\">\r\n    <button tabindex=\"-1\" type=\"button\" role=\"button\" class=\"ae-picker-item\"\r\n          *ngFor=\"let item of options; let i = index\"\r\n          [ngClass]=\"{'selected': item.value === value, 'focused': i === optionId}\"\r\n          (click)=\"optionSelect(item, $event)\">\r\n          {{item.label}}\r\n    </button>\r\n    <span class=\"dropdown-item\" *ngIf=\"!options.length\">No items for select</span>\r\n  </span>\r\n</span>\r\n","import {\r\n  Component,\r\n  ContentChild,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Inject,\r\n  Input,\r\n  Output,\r\n  Renderer2, TemplateRef,\r\n  ViewChild\r\n} from '@angular/core';\r\nimport {AngularEditorService, UploadResponse} from './angular-editor.service';\r\nimport {HttpResponse, HttpEvent} from '@angular/common/http';\r\nimport {DOCUMENT} from '@angular/common';\r\nimport {CustomClass} from './config';\r\nimport {SelectOption} from './ae-select/ae-select.component';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'angular-editor-toolbar',\r\n  templateUrl: './angular-editor-toolbar.component.html',\r\n  styleUrls: ['./angular-editor-toolbar.component.scss'],\r\n})\r\n\r\nexport class AngularEditorToolbarComponent {\r\n  htmlMode = false;\r\n  linkSelected = false;\r\n  block = 'default';\r\n  fontName = 'Times New Roman';\r\n  fontSize = '3';\r\n  foreColour;\r\n  backColor;\r\n\r\n  headings: SelectOption[] = [\r\n    {\r\n      label: 'Heading 1',\r\n      value: 'h1',\r\n    },\r\n    {\r\n      label: 'Heading 2',\r\n      value: 'h2',\r\n    },\r\n    {\r\n      label: 'Heading 3',\r\n      value: 'h3',\r\n    },\r\n    {\r\n      label: 'Heading 4',\r\n      value: 'h4',\r\n    },\r\n    {\r\n      label: 'Heading 5',\r\n      value: 'h5',\r\n    },\r\n    {\r\n      label: 'Heading 6',\r\n      value: 'h6',\r\n    },\r\n    {\r\n      label: 'Heading 7',\r\n      value: 'h7',\r\n    },\r\n    {\r\n      label: 'Paragraph',\r\n      value: 'p',\r\n    },\r\n    {\r\n      label: 'Predefined',\r\n      value: 'pre'\r\n    },\r\n    {\r\n      label: 'Standard',\r\n      value: 'div'\r\n    },\r\n    {\r\n      label: 'default',\r\n      value: 'default'\r\n    }\r\n  ];\r\n\r\n  fontSizes: SelectOption[] = [\r\n    {\r\n      label: '2',\r\n      value: '2',\r\n    },\r\n    {\r\n      label: '3',\r\n      value: '3',\r\n    },\r\n    {\r\n      label: '4',\r\n      value: '4',\r\n    }\r\n  ];\r\n\r\n  customClassId = '-1';\r\n  // eslint-disable-next-line @typescript-eslint/naming-convention, no-underscore-dangle, id-blacklist, id-match\r\n  _customClasses: CustomClass[];\r\n  customClassList: SelectOption[] = [{label: '', value: ''}];\r\n  // uploadUrl: string;\r\n\r\n  tagMap = {\r\n    BLOCKQUOTE: 'indent',\r\n    A: 'link'\r\n  };\r\n\r\n  select = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'P', 'PRE', 'DIV'];\r\n\r\n  buttons = ['bold', 'italic', 'underline', 'strikeThrough', 'subscript', 'superscript', 'justifyLeft', 'justifyCenter',\r\n    'justifyRight', 'justifyFull', 'indent', 'outdent', 'insertUnorderedList', 'insertOrderedList', 'link'];\r\n\r\n  @Input() id: string;\r\n  @Input() uploadUrl: string;\r\n  @Input() upload: (file: File) => Observable<HttpEvent<UploadResponse>>;\r\n  @Input() showToolbar: boolean;\r\n  @Input() fonts: SelectOption[] = [{label: '', value: ''}];\r\n\r\n  @Input()\r\n  set customClasses(classes: CustomClass[]) {\r\n    if (classes) {\r\n      this._customClasses = classes;\r\n      this.customClassList = this._customClasses.map((x, i) => ({label: x.name, value: i.toString()}));\r\n      this.customClassList.unshift({label: 'Clear Class', value: '-1'});\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  set defaultFontName(value: string) {\r\n    if (value) {\r\n      this.fontName = value;\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  set defaultFontSize(value: string) {\r\n    if (value) {\r\n      this.fontSize = value;\r\n    }\r\n  }\r\n\r\n  @Input() hiddenButtons: string[][];\r\n\r\n  @Output() execute: EventEmitter<string> = new EventEmitter<string>();\r\n\r\n  @ViewChild('fileInput', {static: true}) myInputFile: ElementRef;\r\n\r\n  public get isLinkButtonDisabled(): boolean {\r\n    return this.htmlMode || !Boolean(this.editorService.selectedText);\r\n  }\r\n\r\n  constructor(\r\n    private r: Renderer2,\r\n    private editorService: AngularEditorService,\r\n    private er: ElementRef,\r\n    @Inject(DOCUMENT) private doc: any\r\n  ) {\r\n  }\r\n\r\n  /**\r\n   * Trigger command from editor header buttons\r\n   * @param command string from toolbar buttons\r\n   */\r\n  triggerCommand(command: string) {\r\n    this.execute.emit(command);\r\n  }\r\n\r\n  /**\r\n   * highlight editor buttons when cursor moved or positioning\r\n   */\r\n  triggerButtons() {\r\n    if (!this.showToolbar) {\r\n      return;\r\n    }\r\n    this.buttons.forEach(e => {\r\n      const result = this.doc.queryCommandState(e);\r\n      const elementById = this.doc.getElementById(e + '-' + this.id);\r\n      if (result) {\r\n        this.r.addClass(elementById, 'active');\r\n      } else {\r\n        this.r.removeClass(elementById, 'active');\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * trigger highlight editor buttons when cursor moved or positioning in block\r\n   */\r\n  triggerBlocks(nodes: Node[]) {\r\n    if (!this.showToolbar) {\r\n      return;\r\n    }\r\n    this.linkSelected = nodes.findIndex(x => x.nodeName === 'A') > -1;\r\n    let found = false;\r\n    this.select.forEach(y => {\r\n      const node = nodes.find(x => x.nodeName === y);\r\n      if (node !== undefined && y === node.nodeName) {\r\n        if (found === false) {\r\n          this.block = node.nodeName.toLowerCase();\r\n          found = true;\r\n        }\r\n      } else if (found === false) {\r\n        this.block = 'default';\r\n      }\r\n    });\r\n\r\n    found = false;\r\n    if (this._customClasses) {\r\n      this._customClasses.forEach((y, index) => {\r\n        const node = nodes.find(x => {\r\n          if (x instanceof Element) {\r\n            return x.className === y.class;\r\n          }\r\n        });\r\n        if (node !== undefined) {\r\n          if (found === false) {\r\n            this.customClassId = index.toString();\r\n            found = true;\r\n          }\r\n        } else if (found === false) {\r\n          this.customClassId = '-1';\r\n        }\r\n      });\r\n    }\r\n\r\n    Object.keys(this.tagMap).map(e => {\r\n      const elementById = this.doc.getElementById(this.tagMap[e] + '-' + this.id);\r\n      const node = nodes.find(x => x.nodeName === e);\r\n      if (node !== undefined && e === node.nodeName) {\r\n        this.r.addClass(elementById, 'active');\r\n      } else {\r\n        this.r.removeClass(elementById, 'active');\r\n      }\r\n    });\r\n\r\n    this.foreColour = this.doc.queryCommandValue('ForeColor');\r\n    this.fontSize = this.doc.queryCommandValue('FontSize');\r\n    this.fontName = this.doc.queryCommandValue('FontName').replace(/\"/g, '');\r\n    this.backColor = this.doc.queryCommandValue('backColor');\r\n  }\r\n\r\n  /**\r\n   * insert URL link\r\n   */\r\n  insertUrl() {\r\n    let url = 'https:\\/\\/';\r\n    const selection = this.editorService.savedSelection;\r\n    if (selection && selection.commonAncestorContainer.parentElement.nodeName === 'A') {\r\n      const parent = selection.commonAncestorContainer.parentElement as HTMLAnchorElement;\r\n      if (parent.href !== '') {\r\n        url = parent.href;\r\n      }\r\n    }\r\n    url = prompt('Insert URL link', url);\r\n    if (url && url !== '' && url !== 'https://') {\r\n      this.editorService.createLink(url);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * insert Video link\r\n   */\r\n  insertVideo() {\r\n    this.execute.emit('');\r\n    const url = prompt('Insert Video link', `https://`);\r\n    if (url && url !== '' && url !== `https://`) {\r\n      this.editorService.insertVideo(url);\r\n    }\r\n  }\r\n\r\n  /** insert color */\r\n  insertColor(color: string, where: string) {\r\n    this.editorService.insertColor(color, where);\r\n    this.execute.emit('');\r\n  }\r\n\r\n  /**\r\n   * set font Name/family\r\n   * @param foreColor string\r\n   */\r\n  setFontName(foreColor: string): void {\r\n    this.editorService.setFontName(foreColor);\r\n    this.execute.emit('');\r\n  }\r\n\r\n  /**\r\n   * set font Size\r\n   * @param fontSize string\r\n   */\r\n  setFontSize(fontSize: string): void {\r\n    this.editorService.setFontSize(fontSize);\r\n    this.execute.emit('');\r\n  }\r\n\r\n  /**\r\n   * toggle editor mode (WYSIWYG or SOURCE)\r\n   * @param m boolean\r\n   */\r\n  setEditorMode(m: boolean) {\r\n    const toggleEditorModeButton = this.doc.getElementById('toggleEditorMode' + '-' + this.id);\r\n    if (m) {\r\n      this.r.addClass(toggleEditorModeButton, 'active');\r\n    } else {\r\n      this.r.removeClass(toggleEditorModeButton, 'active');\r\n    }\r\n    this.htmlMode = m;\r\n  }\r\n\r\n  /**\r\n   * Upload image when file is selected.\r\n   */\r\n  onFileChanged(event) {\r\n    const file = event.target.files[0];\r\n    if (file.type.includes('image/')) {\r\n        if (this.upload) {\r\n          this.upload(file).subscribe((response: HttpResponse<UploadResponse>) => this.watchUploadImage(response, event));\r\n        } else if (this.uploadUrl) {\r\n            this.editorService.uploadImage(file).subscribe((response: HttpResponse<UploadResponse>) => this.watchUploadImage(response, event));\r\n        } else {\r\n          const reader = new FileReader();\r\n          reader.onload = (e: ProgressEvent) => {\r\n            const fr = e.currentTarget as FileReader;\r\n            this.editorService.insertImage(fr.result.toString());\r\n          };\r\n          reader.readAsDataURL(file);\r\n        }\r\n      }\r\n  }\r\n\r\n  watchUploadImage(response: HttpResponse<{imageUrl: string}>, event) {\r\n    const { imageUrl } = response.body;\r\n    this.editorService.insertImage(imageUrl);\r\n    event.srcElement.value = null;\r\n  }\r\n\r\n  /**\r\n   * Set custom class\r\n   */\r\n  setCustomClass(classId: string) {\r\n    if (classId === '-1') {\r\n      this.execute.emit('clear');\r\n    } else {\r\n      this.editorService.createCustomClass(this._customClasses[+classId]);\r\n    }\r\n  }\r\n\r\n  isButtonHidden(name: string): boolean {\r\n    if (!name) {\r\n      return false;\r\n    }\r\n    if (!(this.hiddenButtons instanceof Array)) {\r\n      return false;\r\n    }\r\n    let result: any;\r\n    for (const arr of this.hiddenButtons) {\r\n      if (arr instanceof Array) {\r\n        result = arr.find(item => item === name);\r\n      }\r\n      if (result) {\r\n        break;\r\n      }\r\n    }\r\n    return result !== undefined;\r\n  }\r\n\r\n  focus() {\r\n    this.execute.emit('focus');\r\n    console.log('focused');\r\n  }\r\n}\r\n","<div class=\"angular-editor-toolbar\" *ngIf=\"showToolbar\">\r\n  <div class=\"angular-editor-toolbar-set\">\r\n    <button type=\"button\" title=\"Undo\" class=\"angular-editor-button\" (click)=\"triggerCommand('undo')\"\r\n            [hidden]=\"isButtonHidden('undo')\" tabindex=\"-1\"><i\r\n      class='fa fa-undo'></i></button>\r\n    <button type=\"button\" title=\"Redo\" class=\"angular-editor-button\" (click)=\"triggerCommand('redo')\"\r\n            [hidden]=\"isButtonHidden('redo')\" tabindex=\"-1\"><i\r\n      class='fa fa-repeat'></i></button>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n    <button [id]=\"'bold-'+id\" type=\"button\" title=\"Bold\" class=\"angular-editor-button\" (click)=\"triggerCommand('bold')\"\r\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('bold')\" tabindex=\"-1\"><i class='fa fa-bold'></i></button>\r\n    <button [id]=\"'italic-'+id\" type=\"button\" title=\"Italic\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('italic')\"\r\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('italic')\" tabindex=\"-1\"><i class='fa fa-italic'></i>\r\n    </button>\r\n    <button [id]=\"'underline-'+id\" type=\"button\" title=\"Underline\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('underline')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('underline')\"\r\n            tabindex=\"-1\"><i class='fa fa-underline'></i></button>\r\n    <button [id]=\"'strikeThrough-'+id\" type=\"button\" title=\"Strikethrough\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('strikeThrough')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('strikeThrough')\"\r\n            tabindex=\"-1\"><i class='fa fa-strikethrough'></i></button>\r\n    <button [id]=\"'subscript-'+id\" type=\"button\" title=\"Subscript\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('subscript')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('subscript')\"\r\n            tabindex=\"-1\"><i class='fa fa-subscript'></i></button>\r\n    <button [id]=\"'superscript-'+id\" type=\"button\" title=\"Superscript\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('superscript')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('superscript')\"\r\n            tabindex=\"-1\"><i class='fa fa-superscript'></i></button>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n    <button [id]=\"'justifyLeft-'+id\" type=\"button\" title=\"Justify Left\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('justifyLeft')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('justifyLeft')\"\r\n            tabindex=\"-1\"><i\r\n      class='fa fa-align-left'></i></button>\r\n    <button [id]=\"'justifyCenter-'+id\" type=\"button\" title=\"Justify Center\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('justifyCenter')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('justifyCenter')\"\r\n            tabindex=\"-1\"><i\r\n      class='fa fa-align-center'></i></button>\r\n    <button [id]=\"'justifyRight-'+id\" type=\"button\" title=\"Justify Right\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('justifyRight')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('justifyRight')\"\r\n            tabindex=\"-1\">\r\n      <i class='fa fa-align-right'></i></button>\r\n    <button [id]=\"'justifyFull-'+id\" type=\"button\" title=\"Justify Full\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('justifyFull')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('justifyFull')\"\r\n            tabindex=\"-1\"><i\r\n      class='fa fa-align-justify'></i></button>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n    <button [id]=\"'indent-'+id\" type=\"button\" title=\"Indent\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('indent')\"\r\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('indent')\" tabindex=\"-1\"><i\r\n      class='fa fa-indent'></i></button>\r\n    <button [id]=\"'outdent-'+id\" type=\"button\" title=\"Outdent\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('outdent')\"\r\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('outdent')\" tabindex=\"-1\"><i\r\n      class='fa fa-outdent'></i></button>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n    <button [id]=\"'insertUnorderedList-'+id\" type=\"button\" title=\"Unordered List\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('insertUnorderedList')\" [disabled]=\"htmlMode\"\r\n            [hidden]=\"isButtonHidden('insertUnorderedList')\" tabindex=\"-1\"><i\r\n      class='fa fa-list-ul'></i></button>\r\n    <button [id]=\"'insertOrderedList-'+id\" type=\"button\" title=\"Ordered List\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('insertOrderedList')\" [disabled]=\"htmlMode\"\r\n            [hidden]=\"isButtonHidden('insertOrderedList')\" tabindex=\"-1\"><i\r\n      class='fa fa-list-ol'></i></button>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n\r\n    <ae-select class=\"select-heading\" [options]=\"headings\"\r\n               [(ngModel)]=\"block\"\r\n               (change)=\"triggerCommand(block)\"\r\n               [disabled]=\"htmlMode\"\r\n               [hidden]=\"isButtonHidden('heading')\"\r\n               tabindex=\"-1\"></ae-select>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n\r\n    <ae-select class=\"select-font\" [options]=\"fonts\"\r\n               [(ngModel)]=\"fontName\"\r\n               (change)=\"setFontName(fontName)\"\r\n               [disabled]=\"htmlMode\"\r\n               [hidden]=\"isButtonHidden('fontName')\"\r\n               tabindex=\"-1\"></ae-select>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n\r\n    <ae-select class=\"select-font-size\" [options]=\"fontSizes\"\r\n               [(ngModel)]=\"fontSize\"\r\n               (change)=\"setFontSize(fontSize)\"\r\n               [disabled]=\"htmlMode\"\r\n               [hidden]=\"isButtonHidden('fontSize')\"\r\n               tabindex=\"-1\">\r\n    </ae-select>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n    <input\r\n      style=\"display: none\"\r\n      type=\"color\" (change)=\"insertColor(fgInput.value, 'textColor')\"\r\n      #fgInput>\r\n    <button [id]=\"'foregroundColorPicker-'+id\" type=\"button\" class=\"angular-editor-button\" (click)=\"focus(); ; fgInput.click()\"\r\n            title=\"Text Color\"\r\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('textColor')\" tabindex=\"-1\"><span\r\n      class=\"color-label foreground\"><i class=\"fa fa-font\"></i></span>\r\n    </button>\r\n    <input\r\n      style=\"display: none\"\r\n      type=\"color\" (change)=\"insertColor(bgInput.value, 'backgroundColor')\"\r\n      #bgInput>\r\n    <button [id]=\"'backgroundColorPicker-'+id\" type=\"button\" class=\"angular-editor-button\" (click)=\"focus(); ; bgInput.click()\"\r\n            title=\"Background Color\"\r\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('backgroundColor')\" tabindex=\"-1\"><span\r\n      class=\"color-label background\"><i class=\"fa fa-font\"></i></span>\r\n    </button>\r\n  </div>\r\n  <div *ngIf=\"_customClasses\" class=\"angular-editor-toolbar-set\">\r\n    <ae-select class=\"select-custom-style\" [options]=\"customClassList\"\r\n               [(ngModel)]=\"customClassId\"\r\n               (change)=\"setCustomClass(customClassId)\"\r\n               [disabled]=\"htmlMode\"\r\n               [hidden]=\"isButtonHidden('customClasses')\"\r\n               tabindex=\"-1\"></ae-select>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n    <button [id]=\"'link-'+id\" type=\"button\" class=\"angular-editor-button\" (click)=\"insertUrl()\"\r\n            title=\"Insert Link\" [disabled]=\"isLinkButtonDisabled\" [hidden]=\"isButtonHidden('link')\" tabindex=\"-1\">\r\n      <i class=\"fa fa-link\"></i>\r\n    </button>\r\n    <button [id]=\"'unlink-'+id\" type=\"button\" class=\"angular-editor-button\" (click)=\"triggerCommand('unlink')\"\r\n            title=\"Unlink\" [disabled]=\"htmlMode || !linkSelected\" [hidden]=\"isButtonHidden('unlink')\" tabindex=\"-1\">\r\n      <i class=\"fa fa-chain-broken\"></i>\r\n    </button>\r\n    <input\r\n      style=\"display: none\"\r\n      accept=\"image/*\"\r\n      type=\"file\" (change)=\"onFileChanged($event)\"\r\n      #fileInput>\r\n    <button [id]=\"'insertImage-'+id\" type=\"button\" class=\"angular-editor-button\" (click)=\"focus(); fileInput.click()\"\r\n            title=\"Insert Image\"\r\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('insertImage')\" tabindex=\"-1\"><i class=\"fa fa-image\"></i>\r\n    </button>\r\n    <button [id]=\"'insertVideo-'+id\" type=\"button\" class=\"angular-editor-button\"\r\n            (click)=\"insertVideo()\" title=\"Insert Video\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('insertVideo')\"\r\n            tabindex=\"-1\"><i\r\n      class=\"fa fa-video-camera\"></i></button>\r\n    <button [id]=\"'insertHorizontalRule-'+id\" type=\"button\" title=\"Horizontal Line\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('insertHorizontalRule')\" [disabled]=\"htmlMode\"\r\n            [hidden]=\"isButtonHidden('insertHorizontalRule')\" tabindex=\"-1\"><i\r\n      class=\"fa fa-minus\"></i></button>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n    <button [id]=\"'clearFormatting-'+id\" type=\"button\" title=\"Clear Formatting\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('removeFormat')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('removeFormat')\"\r\n            tabindex=\"-1\"><i class='fa fa-remove'></i>\r\n    </button>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n    <button [id]=\"'toggleEditorMode-'+id\" type=\"button\" title=\"HTML Code\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('toggleEditorMode')\" [hidden]=\"isButtonHidden('toggleEditorMode')\" tabindex=\"-1\"><i\r\n      class='fa fa-code'></i></button>\r\n  </div>\r\n  <ng-content></ng-content>\r\n</div>\r\n","import {Inject, Injectable} from '@angular/core';\r\nimport {HttpClient, HttpEvent} from '@angular/common/http';\r\nimport {Observable} from 'rxjs';\r\nimport {DOCUMENT} from '@angular/common';\r\nimport {CustomClass} from './config';\r\n\r\nexport interface UploadResponse {\r\n  imageUrl: string;\r\n}\r\n\r\n@Injectable()\r\nexport class AngularEditorService {\r\n\r\n  savedSelection: Range | null;\r\n  selectedText: string;\r\n  uploadUrl: string;\r\n  uploadWithCredentials: boolean;\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    @Inject(DOCUMENT) private doc: any\r\n  ) { }\r\n\r\n  /**\r\n   * Executed command from editor header buttons exclude toggleEditorMode\r\n   * @param command string from triggerCommand\r\n   * @param value\r\n   */\r\n  executeCommand(command: string, value?: string) {\r\n    const commands = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'p', 'pre'];\r\n    if (commands.includes(command)) {\r\n      this.doc.execCommand('formatBlock', false, command);\r\n      return;\r\n    }\r\n    this.doc.execCommand(command, false, value);\r\n  }\r\n\r\n  /**\r\n   * Create URL link\r\n   * @param url string from UI prompt\r\n   */\r\n  createLink(url: string) {\r\n    if (!url.includes('http')) {\r\n      this.doc.execCommand('createlink', false, url);\r\n    } else {\r\n      const newUrl = '<a href=\"' + url + '\" target=\"_blank\">' + this.selectedText + '</a>';\r\n      this.insertHtml(newUrl);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * insert color either font or background\r\n   *\r\n   * @param color color to be inserted\r\n   * @param where where the color has to be inserted either text/background\r\n   */\r\n  insertColor(color: string, where: string): void {\r\n    const restored = this.restoreSelection();\r\n    if (restored) {\r\n      if (where === 'textColor') {\r\n        this.doc.execCommand('foreColor', false, color);\r\n      } else {\r\n        this.doc.execCommand('hiliteColor', false, color);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set font name\r\n   * @param fontName string\r\n   */\r\n  setFontName(fontName: string) {\r\n    this.doc.execCommand('fontName', false, fontName);\r\n  }\r\n\r\n  /**\r\n   * Set font size\r\n   * @param fontSize string\r\n   */\r\n  setFontSize(fontSize: string) {\r\n    this.doc.execCommand('fontSize', false, fontSize);\r\n  }\r\n\r\n  /**\r\n   * Create raw HTML\r\n   * @param html HTML string\r\n   */\r\n  insertHtml(html: string): void {\r\n\r\n    const isHTMLInserted = this.doc.execCommand('insertHTML', false, html);\r\n\r\n    if (!isHTMLInserted) {\r\n      throw new Error('Unable to perform the operation');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * save selection when the editor is focussed out\r\n   */\r\n  public saveSelection = (): void => {\r\n    if (this.doc.getSelection) {\r\n      const sel = this.doc.getSelection();\r\n      if (sel.getRangeAt && sel.rangeCount) {\r\n        this.savedSelection = sel.getRangeAt(0);\r\n        this.selectedText = sel.toString();\r\n      }\r\n    } else if (this.doc.getSelection && this.doc.createRange) {\r\n      this.savedSelection = document.createRange();\r\n    } else {\r\n      this.savedSelection = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * restore selection when the editor is focused in\r\n   *\r\n   * saved selection when the editor is focused out\r\n   */\r\n  restoreSelection(): boolean {\r\n    if (this.savedSelection) {\r\n      if (this.doc.getSelection) {\r\n        const sel = this.doc.getSelection();\r\n        sel.removeAllRanges();\r\n        sel.addRange(this.savedSelection);\r\n        return true;\r\n      } else if (this.doc.getSelection /*&& this.savedSelection.select*/) {\r\n        // this.savedSelection.select();\r\n        return true;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * setTimeout used for execute 'saveSelection' method in next event loop iteration\r\n   */\r\n  public executeInNextQueueIteration(callbackFn: (...args: any[]) => any, timeout = 1e2): void {\r\n    setTimeout(callbackFn, timeout);\r\n  }\r\n\r\n  /** check any selection is made or not */\r\n  private checkSelection(): any {\r\n\r\n    const selectedText = this.savedSelection.toString();\r\n\r\n    if (selectedText.length === 0) {\r\n      throw new Error('No Selection Made');\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Upload file to uploadUrl\r\n   * @param file The file\r\n   */\r\n  uploadImage(file: File): Observable<HttpEvent<UploadResponse>> {\r\n\r\n    const uploadData: FormData = new FormData();\r\n\r\n    uploadData.append('file', file, file.name);\r\n\r\n    return this.http.post<UploadResponse>(this.uploadUrl, uploadData, {\r\n      reportProgress: true,\r\n      observe: 'events',\r\n      withCredentials: this.uploadWithCredentials,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Insert image with Url\r\n   * @param imageUrl The imageUrl.\r\n   */\r\n  insertImage(imageUrl: string) {\r\n    this.doc.execCommand('insertImage', false, imageUrl);\r\n  }\r\n\r\n  setDefaultParagraphSeparator(separator: string) {\r\n    this.doc.execCommand('defaultParagraphSeparator', false, separator);\r\n  }\r\n\r\n  createCustomClass(customClass: CustomClass) {\r\n    let newTag = this.selectedText;\r\n    if (customClass) {\r\n      const tagName = customClass.tag ? customClass.tag : 'span';\r\n      newTag = '<' + tagName + ' class=\"' + customClass.class + '\">' + this.selectedText + '</' + tagName + '>';\r\n    }\r\n    this.insertHtml(newTag);\r\n  }\r\n\r\n  insertVideo(videoUrl: string) {\r\n    if (videoUrl.match('www.youtube.com')) {\r\n      this.insertYouTubeVideoTag(videoUrl);\r\n    }\r\n    if (videoUrl.match('vimeo.com')) {\r\n      this.insertVimeoVideoTag(videoUrl);\r\n    }\r\n  }\r\n\r\n  private insertYouTubeVideoTag(videoUrl: string): void {\r\n    const id = videoUrl.split('v=')[1];\r\n    const imageUrl = `https://img.youtube.com/vi/${id}/0.jpg`;\r\n    const thumbnail = `\r\n      <div style='position: relative'>\r\n        <a href='${videoUrl}' target='_blank'>\r\n          <img src=\"${imageUrl}\" alt=\"click to watch\"/>\r\n          <img style='position: absolute; left:200px; top:140px'\r\n          src=\"https://img.icons8.com/color/96/000000/youtube-play.png\"/>\r\n        </a>\r\n      </div>`;\r\n    this.insertHtml(thumbnail);\r\n  }\r\n\r\n  private insertVimeoVideoTag(videoUrl: string): void {\r\n    const sub = this.http.get<any>(`https://vimeo.com/api/oembed.json?url=${videoUrl}`).subscribe(data => {\r\n      const imageUrl = data.thumbnail_url_with_play_button;\r\n      const thumbnail = `<div>\r\n        <a href='${videoUrl}' target='_blank'>\r\n          <img src=\"${imageUrl}\" alt=\"${data.title}\"/>\r\n        </a>\r\n      </div>`;\r\n      this.insertHtml(thumbnail);\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  nextNode(node) {\r\n    if (node.hasChildNodes()) {\r\n      return node.firstChild;\r\n    } else {\r\n      while (node && !node.nextSibling) {\r\n        node = node.parentNode;\r\n      }\r\n      if (!node) {\r\n        return null;\r\n      }\r\n      return node.nextSibling;\r\n    }\r\n  }\r\n\r\n  getRangeSelectedNodes(range, includePartiallySelectedContainers) {\r\n    let node = range.startContainer;\r\n    const endNode = range.endContainer;\r\n    let rangeNodes = [];\r\n\r\n    // Special case for a range that is contained within a single node\r\n    if (node === endNode) {\r\n      rangeNodes = [node];\r\n    } else {\r\n      // Iterate nodes until we hit the end container\r\n      while (node && node !== endNode) {\r\n        rangeNodes.push( node = this.nextNode(node) );\r\n      }\r\n\r\n      // Add partially selected nodes at the start of the range\r\n      node = range.startContainer;\r\n      while (node && node !== range.commonAncestorContainer) {\r\n        rangeNodes.unshift(node);\r\n        node = node.parentNode;\r\n      }\r\n    }\r\n\r\n    // Add ancestors of the range container, if required\r\n    if (includePartiallySelectedContainers) {\r\n      node = range.commonAncestorContainer;\r\n      while (node) {\r\n        rangeNodes.push(node);\r\n        node = node.parentNode;\r\n      }\r\n    }\r\n\r\n    return rangeNodes;\r\n  }\r\n\r\n  getSelectedNodes() {\r\n    const nodes = [];\r\n    if (this.doc.getSelection) {\r\n      const sel = this.doc.getSelection();\r\n      for (let i = 0, len = sel.rangeCount; i < len; ++i) {\r\n        nodes.push.apply(nodes, this.getRangeSelectedNodes(sel.getRangeAt(i), true));\r\n      }\r\n    }\r\n    return nodes;\r\n  }\r\n\r\n  replaceWithOwnChildren(el) {\r\n    const parent = el.parentNode;\r\n    while (el.hasChildNodes()) {\r\n      parent.insertBefore(el.firstChild, el);\r\n    }\r\n    parent.removeChild(el);\r\n  }\r\n\r\n  removeSelectedElements(tagNames) {\r\n    const tagNamesArray = tagNames.toLowerCase().split(',');\r\n    this.getSelectedNodes().forEach((node) => {\r\n      if (node.nodeType === 1 &&\r\n        tagNamesArray.indexOf(node.tagName.toLowerCase()) > -1) {\r\n        // Remove the node and replace it with its children\r\n        this.replaceWithOwnChildren(node);\r\n      }\r\n    });\r\n  }\r\n}\r\n","import {Component, ViewEncapsulation} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'ae-toolbar-set',\r\n  templateUrl: './ae-toolbar-set.component.html',\r\n  styleUrls: ['./ae-toolbar-set.component.scss'],\r\n  encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class AeToolbarSetComponent {\r\n\r\n  constructor() { }\r\n\r\n}\r\n","<div class=\"angular-editor-toolbar-set\">\r\n  <ng-content></ng-content>\r\n</div>\r\n","import {Component, EventEmitter, Input, Output, ViewEncapsulation} from '@angular/core';\r\n\r\n\r\n@Component({\r\n  selector: 'ae-button',\r\n  templateUrl: './ae-button.component.html',\r\n  styleUrls: ['./ae-button.component.scss'],\r\n  encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class AeButtonComponent {\r\n\r\n  @Input() iconClass = '';\r\n  @Input() title = '';\r\n  @Output() buttonClick = new EventEmitter();\r\n\r\n  constructor() { }\r\n\r\n}\r\n","<button type=\"button\" [title]=\"title\" class=\"angular-editor-button\" (click)=\"buttonClick.emit()\" tabindex=\"-1\"><i\r\n    [class]=\"iconClass\"></i></button>\r\n\r\n","import { UploadResponse } from './angular-editor.service';\r\nimport { HttpEvent } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n\r\nexport interface CustomClass {\r\n  name: string;\r\n  class: string;\r\n  tag?: string;\r\n}\r\n\r\nexport interface Font {\r\n  name: string;\r\n  class: string;\r\n}\r\n\r\nexport interface AngularEditorConfig {\r\n  editable?: boolean;\r\n  spellcheck?: boolean;\r\n  height?: 'auto' | string;\r\n  minHeight?: '0' | string;\r\n  maxHeight?: 'auto' | string;\r\n  width?: 'auto' | string;\r\n  minWidth?: '0' | string;\r\n  translate?: 'yes' | 'now' | string;\r\n  enableToolbar?: boolean;\r\n  showToolbar?: boolean;\r\n  placeholder?: string;\r\n  defaultParagraphSeparator?: string;\r\n  defaultFontName?: string;\r\n  defaultFontSize?: '1' | '2' | '3' | '4' | '5' | '6' | '7' | string;\r\n  uploadUrl?: string;\r\n  upload?: (file: File) => Observable<HttpEvent<UploadResponse>>;\r\n  uploadWithCredentials?: boolean;\r\n  fonts?: Font[];\r\n  customClasses?: CustomClass[];\r\n  sanitize?: boolean;\r\n  toolbarPosition?: 'top' | 'bottom';\r\n  outline?: boolean;\r\n  toolbarHiddenButtons?: string[][];\r\n  rawPaste?: boolean;\r\n}\r\n\r\nexport const angularEditorConfig: AngularEditorConfig = {\r\n  editable: true,\r\n  spellcheck: true,\r\n  height: 'auto',\r\n  minHeight: '0',\r\n  maxHeight: 'auto',\r\n  width: 'auto',\r\n  minWidth: '0',\r\n  translate: 'yes',\r\n  enableToolbar: true,\r\n  showToolbar: true,\r\n  placeholder: 'Enter text here...',\r\n  defaultParagraphSeparator: '',\r\n  defaultFontName: '',\r\n  defaultFontSize: '',\r\n  fonts: [\r\n    {class: 'arial', name: 'Arial'},\r\n    {class: 'times-new-roman', name: 'Times New Roman'},\r\n    {class: 'calibri', name: 'Calibri'},\r\n    {class: 'comic-sans-ms', name: 'Comic Sans MS'}\r\n  ],\r\n  uploadUrl: 'v1/image',\r\n  uploadWithCredentials: false,\r\n  sanitize: true,\r\n  toolbarPosition: 'top',\r\n  outline: true,\r\n  /*toolbarHiddenButtons: [\r\n    ['bold', 'italic', 'underline', 'strikeThrough', 'superscript', 'subscript'],\r\n    ['heading', 'fontName', 'fontSize', 'color'],\r\n    ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull', 'indent', 'outdent'],\r\n    ['cut', 'copy', 'delete', 'removeFormat', 'undo', 'redo'],\r\n    ['paragraph', 'blockquote', 'removeBlockquote', 'horizontalLine', 'orderedList', 'unorderedList'],\r\n    ['link', 'unlink', 'image', 'video']\r\n  ]*/\r\n};\r\n","export function isDefined(value: any) {\r\n  return value !== undefined && value !== null;\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {AngularEditorComponent} from './angular-editor.component';\r\nimport {AngularEditorToolbarComponent} from './angular-editor-toolbar.component';\r\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\r\nimport {CommonModule} from '@angular/common';\r\nimport { AeSelectComponent } from './ae-select/ae-select.component';\r\nimport {AeButtonComponent} from \"./ae-button/ae-button.component\";\r\nimport { AeToolbarSetComponent } from './ae-toolbar-set/ae-toolbar-set.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule, FormsModule, ReactiveFormsModule\r\n  ],\r\n  declarations: [AngularEditorComponent, AngularEditorToolbarComponent, AeSelectComponent, AeButtonComponent, AeToolbarSetComponent],\r\n  exports: [AngularEditorComponent, AngularEditorToolbarComponent, AeButtonComponent, AeToolbarSetComponent]\r\n})\r\nexport class CustomAngularEditorModule {\r\n}\r\n"]}