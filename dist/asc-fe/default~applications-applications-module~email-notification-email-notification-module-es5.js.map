{"version":3,"sources":["webpack:///src/app/modules/pages/applications/editor/lib/angular-editor.component.ts","webpack:///src/app/modules/pages/applications/editor/lib/angular-editor.component.html","webpack:///src/app/modules/pages/applications/editor/lib/ae-select/ae-select.component.ts","webpack:///src/app/modules/pages/applications/editor/lib/ae-select/ae-select.component.html","webpack:///src/app/modules/pages/applications/editor/lib/angular-editor-toolbar.component.ts","webpack:///src/app/modules/pages/applications/editor/lib/angular-editor-toolbar.component.html","webpack:///src/app/modules/pages/applications/editor/lib/angular-editor.service.ts","webpack:///src/app/modules/pages/applications/editor/lib/ae-toolbar-set/ae-toolbar-set.component.ts","webpack:///src/app/modules/pages/applications/editor/lib/ae-toolbar-set/ae-toolbar-set.component.html","webpack:///src/app/modules/pages/applications/editor/lib/ae-button/ae-button.component.ts","webpack:///src/app/modules/pages/applications/editor/lib/ae-button/ae-button.component.html","webpack:///src/app/modules/pages/applications/editor/lib/config.ts","webpack:///src/app/modules/pages/applications/editor/lib/utils.ts","webpack:///src/app/modules/pages/applications/editor/lib/angular-editor.module.ts"],"names":["AngularEditorComponent","r","editorService","doc","sanitizer","cdRef","defaultTabIndex","autoFocus","modeVisual","showPlaceholder","disabled","focused","touched","changed","id","config","placeholder","executeCommandFn","executeCommand","bind","viewMode","blurEvent","focusEvent","tabindex","parsedTabIndex","Number","tabIndex","focus","toolbarPosition","event","rawPaste","preventDefault","text","clipboardData","getData","document","execCommand","command","value","toggleEditorMode","removeSelectedElements","getCustomTags","onContentChange","textArea","nativeElement","exec","stopPropagation","emit","executeInNextQueueIteration","configure","saveSelection","onTouched","relatedTarget","parent","parentElement","classList","contains","sourceText","getElementById","element","html","innerHTML","innerText","onChange","sanitize","undefined","HTML","togglePlaceholder","fn","e","refreshView","normalizedValue","setProperty","addClass","editorWrapper","removeClass","isDisabled","div","action","bToSource","oContent","editableElement","createText","oPre","createElement","setStyle","oCode","appendChild","focusInstance","listen","onTextAreaFocus","blurInstance","onTextAreaBlur","querySelectorAll","createRange","selectNodeContents","firstChild","toString","editorToolbar","setEditorMode","triggerButtons","userSelection","getSelection","a","focusNode","els","unshift","parentNode","triggerBlocks","uploadUrl","uploadWithCredentials","defaultParagraphSeparator","setDefaultParagraphSeparator","defaultFontName","setFontName","defaultFontSize","setFontSize","fonts","map","x","label","name","tags","customClasses","forEach","tag","includes","push","join","replace","provide","useExisting","multi","onTextAreaMouseOut","onPaste","AeSelectComponent","elRef","options","optionId","opened","hidden","changeEvent","selectedOption","hasOwnProperty","isHidden","hide","option","setValue","$event","target","close","index","selectedEl","find","el","i","labelButton","key","_handleArrowDown","_handleArrowUp","_handleSpace","_handleEnter","_handleTab","_handleBackspace","length","optionSelect","toggleOpen","AngularEditorToolbarComponent","er","htmlMode","linkSelected","block","fontName","fontSize","headings","fontSizes","customClassId","customClassList","tagMap","BLOCKQUOTE","A","select","buttons","execute","classes","_customClasses","Boolean","selectedText","showToolbar","result","queryCommandState","elementById","nodes","findIndex","nodeName","found","y","node","toLowerCase","Element","className","Object","keys","foreColour","queryCommandValue","backColor","url","selection","savedSelection","commonAncestorContainer","href","prompt","createLink","insertVideo","color","where","insertColor","foreColor","m","toggleEditorModeButton","file","files","type","upload","subscribe","response","watchUploadImage","uploadImage","reader","FileReader","onload","fr","currentTarget","insertImage","readAsDataURL","imageUrl","body","srcElement","classId","createCustomClass","hiddenButtons","Array","arr","item","console","log","AngularEditorService","http","sel","getRangeAt","rangeCount","commands","newUrl","insertHtml","restored","restoreSelection","isHTMLInserted","Error","removeAllRanges","addRange","callbackFn","timeout","setTimeout","uploadData","FormData","append","post","reportProgress","observe","withCredentials","separator","customClass","newTag","tagName","videoUrl","match","insertYouTubeVideoTag","insertVimeoVideoTag","split","thumbnail","sub","get","data","thumbnail_url_with_play_button","title","unsubscribe","hasChildNodes","nextSibling","range","includePartiallySelectedContainers","startContainer","endNode","endContainer","rangeNodes","nextNode","len","apply","getRangeSelectedNodes","insertBefore","removeChild","tagNames","tagNamesArray","getSelectedNodes","nodeType","indexOf","replaceWithOwnChildren","AeToolbarSetComponent","AeButtonComponent","iconClass","buttonClick","angularEditorConfig","editable","spellcheck","height","minHeight","maxHeight","width","minWidth","translate","enableToolbar","outline","isDefined","CustomAngularEditorModule"],"mappings":"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","file":"default~applications-applications-module~email-notification-email-notification-module-es5.js","sourcesContent":["import {\r\n  AfterViewInit,\r\n  Attribute,\r\n  ChangeDetectorRef,\r\n  Component, ContentChild,\r\n  ElementRef,\r\n  EventEmitter,\r\n  forwardRef,\r\n  HostBinding,\r\n  HostListener,\r\n  Inject,\r\n  Input,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  Renderer2,\r\n  SecurityContext, TemplateRef,\r\n  ViewChild\r\n} from '@angular/core';\r\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\r\nimport {AngularEditorConfig, angularEditorConfig} from './config';\r\nimport {AngularEditorToolbarComponent} from './angular-editor-toolbar.component';\r\nimport {AngularEditorService} from './angular-editor.service';\r\nimport {DOCUMENT} from '@angular/common';\r\nimport {DomSanitizer} from '@angular/platform-browser';\r\nimport {isDefined} from './utils';\r\n\r\n@Component({\r\n  selector: 'angular-editor',\r\n  templateUrl: './angular-editor.component.html',\r\n  styleUrls: ['./angular-editor.component.scss'],\r\n  providers: [\r\n    {\r\n      provide: NG_VALUE_ACCESSOR,\r\n      useExisting: forwardRef(() => AngularEditorComponent),\r\n      multi: true\r\n    },\r\n    AngularEditorService\r\n  ]\r\n})\r\nexport class AngularEditorComponent implements OnInit, ControlValueAccessor, AfterViewInit, OnDestroy {\r\n\r\n  private onChange: (value: string) => void;\r\n  private onTouched: () => void;\r\n\r\n  modeVisual = true;\r\n  showPlaceholder = false;\r\n  disabled = false;\r\n  focused = false;\r\n  touched = false;\r\n  changed = false;\r\n\r\n  focusInstance: any;\r\n  blurInstance: any;\r\n\r\n  @Input() id = '';\r\n  @Input() config: AngularEditorConfig = angularEditorConfig;\r\n  @Input() placeholder = '';\r\n  @Input() tabIndex: number | null;\r\n\r\n  @Output() html;\r\n\r\n  @ViewChild('editor', {static: true}) textArea: ElementRef;\r\n  @ViewChild('editorWrapper', {static: true}) editorWrapper: ElementRef;\r\n  @ViewChild('editorToolbar') editorToolbar: AngularEditorToolbarComponent;\r\n  @ContentChild(\"customButtons\") customButtonsTemplateRef?: TemplateRef<any>;\r\n  executeCommandFn = this.executeCommand.bind(this);\r\n\r\n  @Output() viewMode = new EventEmitter<boolean>();\r\n\r\n  /** emits `blur` event when focused out from the textarea */\r\n    // eslint-disable-next-line @angular-eslint/no-output-native, @angular-eslint/no-output-rename\r\n  @Output('blur') blurEvent: EventEmitter<FocusEvent> = new EventEmitter<FocusEvent>();\r\n\r\n  /** emits `focus` event when focused in to the textarea */\r\n    // eslint-disable-next-line @angular-eslint/no-output-rename, @angular-eslint/no-output-native\r\n  @Output('focus') focusEvent: EventEmitter<FocusEvent> = new EventEmitter<FocusEvent>();\r\n\r\n  @HostBinding('attr.tabindex') tabindex = -1;\r\n\r\n  @HostListener('focus')\r\n  onFocus() {\r\n    this.focus();\r\n  }\r\n\r\n  constructor(\r\n    private r: Renderer2,\r\n    private editorService: AngularEditorService,\r\n    @Inject(DOCUMENT) private doc: any,\r\n    private sanitizer: DomSanitizer,\r\n    private cdRef: ChangeDetectorRef,\r\n    @Attribute('tabindex') defaultTabIndex: string,\r\n    @Attribute('autofocus') private autoFocus: any\r\n  ) {\r\n    const parsedTabIndex = Number(defaultTabIndex);\r\n    this.tabIndex = (parsedTabIndex || parsedTabIndex === 0) ? parsedTabIndex : null;\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.config.toolbarPosition = this.config.toolbarPosition ? this.config.toolbarPosition : angularEditorConfig.toolbarPosition;\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (isDefined(this.autoFocus)) {\r\n      this.focus();\r\n    }\r\n  }\r\n\r\n  onPaste(event: ClipboardEvent){\r\n    if (this.config.rawPaste) {\r\n      event.preventDefault();\r\n      const text = event.clipboardData.getData('text/plain');\r\n      document.execCommand('insertHTML', false, text);\r\n      return text;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Executed command from editor header buttons\r\n   * @param command string from triggerCommand\r\n   * @param value\r\n   */\r\n  executeCommand(command: string, value?: string) {\r\n    this.focus();\r\n    if (command === 'focus') {\r\n      return;\r\n    }\r\n    if (command === 'toggleEditorMode') {\r\n      this.toggleEditorMode(this.modeVisual);\r\n    } else if (command !== '') {\r\n      if (command === 'clear') {\r\n        this.editorService.removeSelectedElements(this.getCustomTags());\r\n        this.onContentChange(this.textArea.nativeElement);\r\n      } else if (command === 'default') {\r\n        this.editorService.removeSelectedElements('h1,h2,h3,h4,h5,h6,p,pre');\r\n        this.onContentChange(this.textArea.nativeElement);\r\n      } else {\r\n        this.editorService.executeCommand(command, value);\r\n      }\r\n      this.exec();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * focus event\r\n   */\r\n  onTextAreaFocus(event: FocusEvent): void {\r\n    if (this.focused) {\r\n      event.stopPropagation();\r\n      return;\r\n    }\r\n    this.focused = true;\r\n    this.focusEvent.emit(event);\r\n    if (!this.touched || !this.changed) {\r\n      this.editorService.executeInNextQueueIteration(() => {\r\n        this.configure();\r\n        this.touched = true;\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description fires when cursor leaves textarea\r\n   */\r\n  public onTextAreaMouseOut(event: MouseEvent): void {\r\n    this.editorService.saveSelection();\r\n  }\r\n\r\n  /**\r\n   * blur event\r\n   */\r\n  onTextAreaBlur(event: FocusEvent) {\r\n    /**\r\n     * save selection if focussed out\r\n     */\r\n    this.editorService.executeInNextQueueIteration(this.editorService.saveSelection);\r\n\r\n    if (typeof this.onTouched === 'function') {\r\n      this.onTouched();\r\n    }\r\n\r\n    if (event.relatedTarget !== null) {\r\n      const parent = (event.relatedTarget as HTMLElement).parentElement;\r\n      if (!parent.classList.contains('angular-editor-toolbar-set') && !parent.classList.contains('ae-picker')) {\r\n        this.blurEvent.emit(event);\r\n        this.focused = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  focus the text area when the editor is focused\r\n   */\r\n  focus() {\r\n    if (this.modeVisual) {\r\n      this.textArea.nativeElement.focus();\r\n    } else {\r\n      const sourceText = this.doc.getElementById('sourceText' + this.id);\r\n      sourceText.focus();\r\n      this.focused = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Executed from the contenteditable section while the input property changes\r\n   * @param element html element from contenteditable\r\n   */\r\n  onContentChange(element: HTMLElement): void {\r\n    let html = '';\r\n    if (this.modeVisual) {\r\n      html = element.innerHTML;\r\n    } else {\r\n      html = element.innerText;\r\n    }\r\n    if ((!html || html === '<br>')) {\r\n      html = '';\r\n    }\r\n    if (typeof this.onChange === 'function') {\r\n      this.onChange(this.config.sanitize || this.config.sanitize === undefined ?\r\n        this.sanitizer.sanitize(SecurityContext.HTML, html) : html);\r\n      if ((!html) !== this.showPlaceholder) {\r\n        this.togglePlaceholder(this.showPlaceholder);\r\n      }\r\n    }\r\n    this.changed = true;\r\n  }\r\n\r\n  /**\r\n   * Set the function to be called\r\n   * when the control receives a change event.\r\n   *\r\n   * @param fn a function\r\n   */\r\n  registerOnChange(fn: any): void {\r\n    this.onChange = e => (e === '<br>' ? fn('') : fn(e)) ;\r\n  }\r\n\r\n  /**\r\n   * Set the function to be called\r\n   * when the control receives a touch event.\r\n   *\r\n   * @param fn a function\r\n   */\r\n  registerOnTouched(fn: any): void {\r\n    this.onTouched = fn;\r\n  }\r\n\r\n  /**\r\n   * Write a new value to the element.\r\n   *\r\n   * @param value value to be executed when there is a change in contenteditable\r\n   */\r\n  writeValue(value: any): void {\r\n\r\n    if ((!value || value === '<br>' || value === '') !== this.showPlaceholder) {\r\n      this.togglePlaceholder(this.showPlaceholder);\r\n    }\r\n\r\n    if (value === undefined || value === '' || value === '<br>') {\r\n      value = null;\r\n    }\r\n\r\n    this.refreshView(value);\r\n  }\r\n\r\n  /**\r\n   * refresh view/HTML of the editor\r\n   *\r\n   * @param value html string from the editor\r\n   */\r\n  refreshView(value: string): void {\r\n    const normalizedValue = value === null ? '' : value;\r\n    this.r.setProperty(this.textArea.nativeElement, 'innerHTML', normalizedValue);\r\n\r\n    return;\r\n  }\r\n\r\n  /**\r\n   * toggles placeholder based on input string\r\n   *\r\n   * @param value A HTML string from the editor\r\n   */\r\n  togglePlaceholder(value: boolean): void {\r\n    if (!value) {\r\n      this.r.addClass(this.editorWrapper.nativeElement, 'show-placeholder');\r\n      this.showPlaceholder = true;\r\n\r\n    } else {\r\n      this.r.removeClass(this.editorWrapper.nativeElement, 'show-placeholder');\r\n      this.showPlaceholder = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Implements disabled state for this element\r\n   *\r\n   * @param isDisabled Disabled flag\r\n   */\r\n  setDisabledState(isDisabled: boolean): void {\r\n    const div = this.textArea.nativeElement;\r\n    const action = isDisabled ? 'addClass' : 'removeClass';\r\n    this.r[action](div, 'disabled');\r\n    this.disabled = isDisabled;\r\n  }\r\n\r\n  /**\r\n   * toggles editor mode based on bToSource bool\r\n   *\r\n   * @param bToSource A boolean value from the editor\r\n   */\r\n  toggleEditorMode(bToSource: boolean) {\r\n    let oContent: any;\r\n    const editableElement = this.textArea.nativeElement;\r\n\r\n    if (bToSource) {\r\n      oContent = this.r.createText(editableElement.innerHTML);\r\n      this.r.setProperty(editableElement, 'innerHTML', '');\r\n      this.r.setProperty(editableElement, 'contentEditable', false);\r\n\r\n      const oPre = this.r.createElement('pre');\r\n      this.r.setStyle(oPre, 'margin', '0');\r\n      this.r.setStyle(oPre, 'outline', 'none');\r\n\r\n      const oCode = this.r.createElement('code');\r\n      this.r.setProperty(oCode, 'id', 'sourceText' + this.id);\r\n      this.r.setStyle(oCode, 'display', 'block');\r\n      this.r.setStyle(oCode, 'white-space', 'pre-wrap');\r\n      this.r.setStyle(oCode, 'word-break', 'keep-all');\r\n      this.r.setStyle(oCode, 'outline', 'none');\r\n      this.r.setStyle(oCode, 'margin', '0');\r\n      this.r.setStyle(oCode, 'background-color', '#fff5b9');\r\n      this.r.setProperty(oCode, 'contentEditable', true);\r\n      this.r.appendChild(oCode, oContent);\r\n      this.focusInstance = this.r.listen(oCode, 'focus', (event) => this.onTextAreaFocus(event));\r\n      this.blurInstance = this.r.listen(oCode, 'blur', (event) => this.onTextAreaBlur(event));\r\n      this.r.appendChild(oPre, oCode);\r\n      this.r.appendChild(editableElement, oPre);\r\n\r\n      // ToDo move to service\r\n      this.doc.execCommand('defaultParagraphSeparator', false, 'div');\r\n\r\n      this.modeVisual = false;\r\n      this.viewMode.emit(false);\r\n      oCode.focus();\r\n    } else {\r\n      if (this.doc.querySelectorAll) {\r\n        this.r.setProperty(editableElement, 'innerHTML', editableElement.innerText);\r\n      } else {\r\n        oContent = this.doc.createRange();\r\n        oContent.selectNodeContents(editableElement.firstChild);\r\n        this.r.setProperty(editableElement, 'innerHTML', oContent.toString());\r\n      }\r\n      this.r.setProperty(editableElement, 'contentEditable', true);\r\n      this.modeVisual = true;\r\n      this.viewMode.emit(true);\r\n      this.onContentChange(editableElement);\r\n      editableElement.focus();\r\n    }\r\n    this.editorToolbar.setEditorMode(!this.modeVisual);\r\n  }\r\n\r\n  /**\r\n   * toggles editor buttons when cursor moved or positioning\r\n   *\r\n   * Send a node array from the contentEditable of the editor\r\n   */\r\n  exec() {\r\n    this.editorToolbar.triggerButtons();\r\n\r\n    let userSelection;\r\n    if (this.doc.getSelection) {\r\n      userSelection = this.doc.getSelection();\r\n      this.editorService.executeInNextQueueIteration(this.editorService.saveSelection);\r\n    }\r\n\r\n    let a = userSelection.focusNode;\r\n    const els = [];\r\n    while (a && a.id !== 'editor') {\r\n      els.unshift(a);\r\n      a = a.parentNode;\r\n    }\r\n    this.editorToolbar.triggerBlocks(els);\r\n  }\r\n\r\n  private configure() {\r\n    this.editorService.uploadUrl = this.config.uploadUrl;\r\n    this.editorService.uploadWithCredentials = this.config.uploadWithCredentials;\r\n    if (this.config.defaultParagraphSeparator) {\r\n      this.editorService.setDefaultParagraphSeparator(this.config.defaultParagraphSeparator);\r\n    }\r\n    if (this.config.defaultFontName) {\r\n      this.editorService.setFontName(this.config.defaultFontName);\r\n    }\r\n    if (this.config.defaultFontSize) {\r\n      this.editorService.setFontSize(this.config.defaultFontSize);\r\n    }\r\n  }\r\n\r\n  getFonts() {\r\n    const fonts = this.config.fonts ? this.config.fonts : angularEditorConfig.fonts;\r\n    return fonts.map(x => {\r\n      return {label: x.name, value: x.name};\r\n    });\r\n  }\r\n\r\n  getCustomTags() {\r\n    const tags = ['span'];\r\n    this.config.customClasses.forEach(x => {\r\n      if (x.tag !== undefined) {\r\n        if (!tags.includes(x.tag)) {\r\n          tags.push(x.tag);\r\n        }\r\n      }\r\n    });\r\n    return tags.join(',');\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.blurInstance) {\r\n      this.blurInstance();\r\n    }\r\n    if (this.focusInstance) {\r\n      this.focusInstance();\r\n    }\r\n  }\r\n\r\n  filterStyles(html: string): string {\r\n    html = html.replace('position: fixed;', '');\r\n    return html;\r\n  }\r\n}\r\n","<div\r\n     class=\"angular-editor\"\r\n     #angularEditor\r\n     [style.width]=\"config.width\"\r\n     [style.minWidth]=\"config.minWidth\"\r\n>\r\n     <angular-editor-toolbar\r\n          *ngIf=\"config.toolbarPosition === 'top'\"\r\n          #editorToolbar\r\n          [id]=\"id\"\r\n          [uploadUrl]=\"config.uploadUrl\"\r\n          [upload]=\"config.upload\"\r\n          [showToolbar]=\"config.showToolbar !== undefined ? config.showToolbar : true\"\r\n          [fonts]=\"getFonts()\"\r\n          [customClasses]=\"config.customClasses\"\r\n          [defaultFontName]=\"config.defaultFontName\"\r\n          [defaultFontSize]=\"config.defaultFontSize\"\r\n          [hiddenButtons]=\"config.toolbarHiddenButtons\"\r\n          (execute)=\"executeCommand($event)\"\r\n     >\r\n       <ng-container\r\n         [ngTemplateOutlet]=\"customButtonsTemplateRef\"\r\n         [ngTemplateOutletContext]=\"{ executeCommandFn: this.executeCommandFn}\"\r\n       >\r\n       </ng-container>\r\n     </angular-editor-toolbar>\r\n\r\n     <div\r\n          class=\"angular-editor-wrapper\"\r\n          #editorWrapper\r\n     >\r\n          <div\r\n               #editor\r\n               class=\"angular-editor-textarea\"\r\n               [attr.contenteditable]=\"config.editable\"\r\n               [attr.tabindex]=\"disabled ? -1 : tabIndex\"\r\n               [attr.translate]=\"config.translate\"\r\n               [attr.spellcheck]=\"config.spellcheck\"\r\n               [style.height]=\"config.height\"\r\n               [style.minHeight]=\"config.minHeight\"\r\n               [style.maxHeight]=\"config.maxHeight\"\r\n               [style.outline]=\"config.outline === false ? 'none': undefined\"\r\n               (input)=\"onContentChange($event.target)\"\r\n               (focus)=\"onTextAreaFocus($event)\"\r\n               (blur)=\"onTextAreaBlur($event)\"\r\n               (click)=\"exec()\"\r\n               (keyup)=\"exec()\"\r\n               (mouseout)=\"onTextAreaMouseOut($event)\"\r\n               (paste)=\"onPaste($event)\"\r\n          >\r\n          </div>\r\n          <span class=\"angular-editor-placeholder\">{{ placeholder || config['placeholder'] }}</span>\r\n     </div>\r\n     <angular-editor-toolbar\r\n          *ngIf=\"config.toolbarPosition === 'bottom'\"\r\n          #editorToolbar\r\n          [id]=\"id\"\r\n          [uploadUrl]=\"config.uploadUrl\"\r\n          [upload]=\"config.upload\"\r\n          [showToolbar]=\"config.showToolbar !== undefined ? config.showToolbar : true\"\r\n          [fonts]=\"getFonts()\"\r\n          [customClasses]=\"config.customClasses\"\r\n          [defaultFontName]=\"config.defaultFontName\"\r\n          [defaultFontSize]=\"config.defaultFontSize\"\r\n          [hiddenButtons]=\"config.toolbarHiddenButtons\"\r\n          (execute)=\"executeCommand($event)\"\r\n     ></angular-editor-toolbar>\r\n</div>\r\n","import {\r\n  Attribute,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  forwardRef, HostBinding,\r\n  HostListener,\r\n  Input,\r\n  OnInit,\r\n  Output,\r\n  Renderer2,\r\n  ViewChild,\r\n  ViewEncapsulation\r\n} from '@angular/core';\r\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\r\nimport {isDefined} from '../utils';\r\n\r\nexport interface SelectOption {\r\n  label: string;\r\n  value: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'ae-select',\r\n  templateUrl: './ae-select.component.html',\r\n  styleUrls: ['./ae-select.component.scss'],\r\n  encapsulation: ViewEncapsulation.None,\r\n  providers: [\r\n    {\r\n      provide: NG_VALUE_ACCESSOR,\r\n      useExisting: forwardRef(() => AeSelectComponent),\r\n      multi: true,\r\n    }\r\n  ]\r\n})\r\nexport class AeSelectComponent implements OnInit, ControlValueAccessor {\r\n  @Input() options: SelectOption[] = [];\r\n  // eslint-disable-next-line @angular-eslint/no-input-rename\r\n  @Input('hidden') isHidden: boolean;\r\n\r\n  selectedOption: SelectOption;\r\n  disabled = false;\r\n  optionId = 0;\r\n\r\n  get label(): string {\r\n    return this.selectedOption && this.selectedOption.hasOwnProperty('label') ? this.selectedOption.label : 'Select';\r\n  }\r\n\r\n  opened = false;\r\n\r\n  get value(): string {\r\n    return this.selectedOption.value;\r\n  }\r\n\r\n  @HostBinding('style.display') hidden = 'inline-block';\r\n\r\n  // eslint-disable-next-line @angular-eslint/no-output-native, @angular-eslint/no-output-rename\r\n  @Output('change') changeEvent = new EventEmitter();\r\n\r\n  @ViewChild('labelButton', {static: true}) labelButton: ElementRef;\r\n\r\n  constructor(private elRef: ElementRef,\r\n              private r: Renderer2,\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.selectedOption = this.options[0];\r\n    if (isDefined(this.isHidden) && this.isHidden) {\r\n      this.hide();\r\n    }\r\n  }\r\n\r\n  hide() {\r\n    this.hidden = 'none';\r\n  }\r\n\r\n  optionSelect(option: SelectOption, event: MouseEvent) {\r\n    event.stopPropagation();\r\n    this.setValue(option.value);\r\n    this.onChange(this.selectedOption.value);\r\n    this.changeEvent.emit(this.selectedOption.value);\r\n    this.onTouched();\r\n    this.opened = false;\r\n  }\r\n\r\n  toggleOpen(event: MouseEvent) {\r\n    // event.stopPropagation();\r\n    if (this.disabled) {\r\n      return;\r\n    }\r\n    this.opened = !this.opened;\r\n  }\r\n\r\n  @HostListener('document:click', ['$event'])\r\n  onClick($event: MouseEvent) {\r\n    if (!this.elRef.nativeElement.contains($event.target)) {\r\n      this.close();\r\n    }\r\n  }\r\n\r\n  close() {\r\n    this.opened = false;\r\n  }\r\n\r\n  get isOpen(): boolean {\r\n    return this.opened;\r\n  }\r\n\r\n  writeValue(value) {\r\n    if (!value || typeof value !== 'string') {\r\n      return;\r\n    }\r\n    this.setValue(value);\r\n  }\r\n\r\n  setValue(value) {\r\n    let index = 0;\r\n    const selectedEl = this.options.find((el, i) => {\r\n      index = i;\r\n      return el.value === value;\r\n    });\r\n    if (selectedEl) {\r\n      this.selectedOption = selectedEl;\r\n      this.optionId = index;\r\n    }\r\n  }\r\n\r\n  onChange: any = () => {\r\n  }\r\n  onTouched: any = () => {\r\n  }\r\n\r\n  registerOnChange(fn) {\r\n    this.onChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn) {\r\n    this.onTouched = fn;\r\n  }\r\n\r\n  setDisabledState(isDisabled: boolean): void {\r\n    this.labelButton.nativeElement.disabled = isDisabled;\r\n    const div = this.labelButton.nativeElement;\r\n    const action = isDisabled ? 'addClass' : 'removeClass';\r\n    this.r[action](div, 'disabled');\r\n    this.disabled = isDisabled;\r\n  }\r\n\r\n  @HostListener('keydown', ['$event'])\r\n  handleKeyDown($event: KeyboardEvent) {\r\n    if (!this.opened) {\r\n      return;\r\n    }\r\n    // console.log($event.key);\r\n    // if (KeyCode[$event.key]) {\r\n    switch ($event.key) {\r\n      case 'ArrowDown':\r\n        this._handleArrowDown($event);\r\n        break;\r\n      case 'ArrowUp':\r\n        this._handleArrowUp($event);\r\n        break;\r\n      case 'Space':\r\n        this._handleSpace($event);\r\n        break;\r\n      case 'Enter':\r\n        this._handleEnter($event);\r\n        break;\r\n      case 'Tab':\r\n        this._handleTab($event);\r\n        break;\r\n      case 'Escape':\r\n        this.close();\r\n        $event.preventDefault();\r\n        break;\r\n      case 'Backspace':\r\n        this._handleBackspace();\r\n        break;\r\n    }\r\n    // } else if ($event.key && $event.key.length === 1) {\r\n    // this._keyPress$.next($event.key.toLocaleLowerCase());\r\n    // }\r\n  }\r\n\r\n  _handleArrowDown($event) {\r\n    if (this.optionId < this.options.length - 1) {\r\n      this.optionId++;\r\n    }\r\n  }\r\n\r\n  _handleArrowUp($event) {\r\n    if (this.optionId >= 1) {\r\n      this.optionId--;\r\n    }\r\n  }\r\n\r\n  _handleSpace($event) {\r\n\r\n  }\r\n\r\n  _handleEnter($event) {\r\n    this.optionSelect(this.options[this.optionId], $event);\r\n  }\r\n\r\n  _handleTab($event) {\r\n\r\n  }\r\n\r\n  _handleBackspace() {\r\n\r\n  }\r\n}\r\n","<span class=\"ae-font ae-picker\" [ngClass]=\"{'ae-expanded':isOpen}\">\r\n  <button [tabIndex]=\"-1\" #labelButton tabindex=\"0\" type=\"button\" role=\"button\" class=\"ae-picker-label\" (click)=\"toggleOpen($event);\">{{label}}\r\n    <svg viewBox=\"0 0 18 18\">\r\n     <!-- <use x=\"0\" y=\"0\" xlink:href=\"../assets/icons.svg#hom\"></use>-->\r\n      <polygon class=\"ae-stroke\" points=\"7 11 9 13 11 11 7 11\"></polygon>\r\n      <polygon class=\"ae-stroke\" points=\"7 7 9 5 11 7 7 7\"></polygon>\r\n    </svg>\r\n  </button>\r\n  <span class=\"ae-picker-options\">\r\n    <button tabindex=\"-1\" type=\"button\" role=\"button\" class=\"ae-picker-item\"\r\n          *ngFor=\"let item of options; let i = index\"\r\n          [ngClass]=\"{'selected': item.value === value, 'focused': i === optionId}\"\r\n          (click)=\"optionSelect(item, $event)\">\r\n          {{item.label}}\r\n    </button>\r\n    <span class=\"dropdown-item\" *ngIf=\"!options.length\">No items for select</span>\r\n  </span>\r\n</span>\r\n","import {\r\n  Component,\r\n  ContentChild,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Inject,\r\n  Input,\r\n  Output,\r\n  Renderer2, TemplateRef,\r\n  ViewChild\r\n} from '@angular/core';\r\nimport {AngularEditorService, UploadResponse} from './angular-editor.service';\r\nimport {HttpResponse, HttpEvent} from '@angular/common/http';\r\nimport {DOCUMENT} from '@angular/common';\r\nimport {CustomClass} from './config';\r\nimport {SelectOption} from './ae-select/ae-select.component';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'angular-editor-toolbar',\r\n  templateUrl: './angular-editor-toolbar.component.html',\r\n  styleUrls: ['./angular-editor-toolbar.component.scss'],\r\n})\r\n\r\nexport class AngularEditorToolbarComponent {\r\n  htmlMode = false;\r\n  linkSelected = false;\r\n  block = 'default';\r\n  fontName = 'Times New Roman';\r\n  fontSize = '3';\r\n  foreColour;\r\n  backColor;\r\n\r\n  headings: SelectOption[] = [\r\n    {\r\n      label: 'Heading 1',\r\n      value: 'h1',\r\n    },\r\n    {\r\n      label: 'Heading 2',\r\n      value: 'h2',\r\n    },\r\n    {\r\n      label: 'Heading 3',\r\n      value: 'h3',\r\n    },\r\n    {\r\n      label: 'Heading 4',\r\n      value: 'h4',\r\n    },\r\n    {\r\n      label: 'Heading 5',\r\n      value: 'h5',\r\n    },\r\n    {\r\n      label: 'Heading 6',\r\n      value: 'h6',\r\n    },\r\n    {\r\n      label: 'Heading 7',\r\n      value: 'h7',\r\n    },\r\n    {\r\n      label: 'Paragraph',\r\n      value: 'p',\r\n    },\r\n    {\r\n      label: 'Predefined',\r\n      value: 'pre'\r\n    },\r\n    {\r\n      label: 'Standard',\r\n      value: 'div'\r\n    },\r\n    {\r\n      label: 'default',\r\n      value: 'default'\r\n    }\r\n  ];\r\n\r\n  fontSizes: SelectOption[] = [\r\n    {\r\n      label: '2',\r\n      value: '2',\r\n    },\r\n    {\r\n      label: '3',\r\n      value: '3',\r\n    },\r\n    {\r\n      label: '4',\r\n      value: '4',\r\n    }\r\n  ];\r\n\r\n  customClassId = '-1';\r\n  // eslint-disable-next-line @typescript-eslint/naming-convention, no-underscore-dangle, id-blacklist, id-match\r\n  _customClasses: CustomClass[];\r\n  customClassList: SelectOption[] = [{label: '', value: ''}];\r\n  // uploadUrl: string;\r\n\r\n  tagMap = {\r\n    BLOCKQUOTE: 'indent',\r\n    A: 'link'\r\n  };\r\n\r\n  select = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6', 'P', 'PRE', 'DIV'];\r\n\r\n  buttons = ['bold', 'italic', 'underline', 'strikeThrough', 'subscript', 'superscript', 'justifyLeft', 'justifyCenter',\r\n    'justifyRight', 'justifyFull', 'indent', 'outdent', 'insertUnorderedList', 'insertOrderedList', 'link'];\r\n\r\n  @Input() id: string;\r\n  @Input() uploadUrl: string;\r\n  @Input() upload: (file: File) => Observable<HttpEvent<UploadResponse>>;\r\n  @Input() showToolbar: boolean;\r\n  @Input() fonts: SelectOption[] = [{label: '', value: ''}];\r\n\r\n  @Input()\r\n  set customClasses(classes: CustomClass[]) {\r\n    if (classes) {\r\n      this._customClasses = classes;\r\n      this.customClassList = this._customClasses.map((x, i) => ({label: x.name, value: i.toString()}));\r\n      this.customClassList.unshift({label: 'Clear Class', value: '-1'});\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  set defaultFontName(value: string) {\r\n    if (value) {\r\n      this.fontName = value;\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  set defaultFontSize(value: string) {\r\n    if (value) {\r\n      this.fontSize = value;\r\n    }\r\n  }\r\n\r\n  @Input() hiddenButtons: string[][];\r\n\r\n  @Output() execute: EventEmitter<string> = new EventEmitter<string>();\r\n\r\n  @ViewChild('fileInput', {static: true}) myInputFile: ElementRef;\r\n\r\n  public get isLinkButtonDisabled(): boolean {\r\n    return this.htmlMode || !Boolean(this.editorService.selectedText);\r\n  }\r\n\r\n  constructor(\r\n    private r: Renderer2,\r\n    private editorService: AngularEditorService,\r\n    private er: ElementRef,\r\n    @Inject(DOCUMENT) private doc: any\r\n  ) {\r\n  }\r\n\r\n  /**\r\n   * Trigger command from editor header buttons\r\n   * @param command string from toolbar buttons\r\n   */\r\n  triggerCommand(command: string) {\r\n    this.execute.emit(command);\r\n  }\r\n\r\n  /**\r\n   * highlight editor buttons when cursor moved or positioning\r\n   */\r\n  triggerButtons() {\r\n    if (!this.showToolbar) {\r\n      return;\r\n    }\r\n    this.buttons.forEach(e => {\r\n      const result = this.doc.queryCommandState(e);\r\n      const elementById = this.doc.getElementById(e + '-' + this.id);\r\n      if (result) {\r\n        this.r.addClass(elementById, 'active');\r\n      } else {\r\n        this.r.removeClass(elementById, 'active');\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * trigger highlight editor buttons when cursor moved or positioning in block\r\n   */\r\n  triggerBlocks(nodes: Node[]) {\r\n    if (!this.showToolbar) {\r\n      return;\r\n    }\r\n    this.linkSelected = nodes.findIndex(x => x.nodeName === 'A') > -1;\r\n    let found = false;\r\n    this.select.forEach(y => {\r\n      const node = nodes.find(x => x.nodeName === y);\r\n      if (node !== undefined && y === node.nodeName) {\r\n        if (found === false) {\r\n          this.block = node.nodeName.toLowerCase();\r\n          found = true;\r\n        }\r\n      } else if (found === false) {\r\n        this.block = 'default';\r\n      }\r\n    });\r\n\r\n    found = false;\r\n    if (this._customClasses) {\r\n      this._customClasses.forEach((y, index) => {\r\n        const node = nodes.find(x => {\r\n          if (x instanceof Element) {\r\n            return x.className === y.class;\r\n          }\r\n        });\r\n        if (node !== undefined) {\r\n          if (found === false) {\r\n            this.customClassId = index.toString();\r\n            found = true;\r\n          }\r\n        } else if (found === false) {\r\n          this.customClassId = '-1';\r\n        }\r\n      });\r\n    }\r\n\r\n    Object.keys(this.tagMap).map(e => {\r\n      const elementById = this.doc.getElementById(this.tagMap[e] + '-' + this.id);\r\n      const node = nodes.find(x => x.nodeName === e);\r\n      if (node !== undefined && e === node.nodeName) {\r\n        this.r.addClass(elementById, 'active');\r\n      } else {\r\n        this.r.removeClass(elementById, 'active');\r\n      }\r\n    });\r\n\r\n    this.foreColour = this.doc.queryCommandValue('ForeColor');\r\n    this.fontSize = this.doc.queryCommandValue('FontSize');\r\n    this.fontName = this.doc.queryCommandValue('FontName').replace(/\"/g, '');\r\n    this.backColor = this.doc.queryCommandValue('backColor');\r\n  }\r\n\r\n  /**\r\n   * insert URL link\r\n   */\r\n  insertUrl() {\r\n    let url = 'https:\\/\\/';\r\n    const selection = this.editorService.savedSelection;\r\n    if (selection && selection.commonAncestorContainer.parentElement.nodeName === 'A') {\r\n      const parent = selection.commonAncestorContainer.parentElement as HTMLAnchorElement;\r\n      if (parent.href !== '') {\r\n        url = parent.href;\r\n      }\r\n    }\r\n    url = prompt('Insert URL link', url);\r\n    if (url && url !== '' && url !== 'https://') {\r\n      this.editorService.createLink(url);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * insert Video link\r\n   */\r\n  insertVideo() {\r\n    this.execute.emit('');\r\n    const url = prompt('Insert Video link', `https://`);\r\n    if (url && url !== '' && url !== `https://`) {\r\n      this.editorService.insertVideo(url);\r\n    }\r\n  }\r\n\r\n  /** insert color */\r\n  insertColor(color: string, where: string) {\r\n    this.editorService.insertColor(color, where);\r\n    this.execute.emit('');\r\n  }\r\n\r\n  /**\r\n   * set font Name/family\r\n   * @param foreColor string\r\n   */\r\n  setFontName(foreColor: string): void {\r\n    this.editorService.setFontName(foreColor);\r\n    this.execute.emit('');\r\n  }\r\n\r\n  /**\r\n   * set font Size\r\n   * @param fontSize string\r\n   */\r\n  setFontSize(fontSize: string): void {\r\n    this.editorService.setFontSize(fontSize);\r\n    this.execute.emit('');\r\n  }\r\n\r\n  /**\r\n   * toggle editor mode (WYSIWYG or SOURCE)\r\n   * @param m boolean\r\n   */\r\n  setEditorMode(m: boolean) {\r\n    const toggleEditorModeButton = this.doc.getElementById('toggleEditorMode' + '-' + this.id);\r\n    if (m) {\r\n      this.r.addClass(toggleEditorModeButton, 'active');\r\n    } else {\r\n      this.r.removeClass(toggleEditorModeButton, 'active');\r\n    }\r\n    this.htmlMode = m;\r\n  }\r\n\r\n  /**\r\n   * Upload image when file is selected.\r\n   */\r\n  onFileChanged(event) {\r\n    const file = event.target.files[0];\r\n    if (file.type.includes('image/')) {\r\n        if (this.upload) {\r\n          this.upload(file).subscribe((response: HttpResponse<UploadResponse>) => this.watchUploadImage(response, event));\r\n        } else if (this.uploadUrl) {\r\n            this.editorService.uploadImage(file).subscribe((response: HttpResponse<UploadResponse>) => this.watchUploadImage(response, event));\r\n        } else {\r\n          const reader = new FileReader();\r\n          reader.onload = (e: ProgressEvent) => {\r\n            const fr = e.currentTarget as FileReader;\r\n            this.editorService.insertImage(fr.result.toString());\r\n          };\r\n          reader.readAsDataURL(file);\r\n        }\r\n      }\r\n  }\r\n\r\n  watchUploadImage(response: HttpResponse<{imageUrl: string}>, event) {\r\n    const { imageUrl } = response.body;\r\n    this.editorService.insertImage(imageUrl);\r\n    event.srcElement.value = null;\r\n  }\r\n\r\n  /**\r\n   * Set custom class\r\n   */\r\n  setCustomClass(classId: string) {\r\n    if (classId === '-1') {\r\n      this.execute.emit('clear');\r\n    } else {\r\n      this.editorService.createCustomClass(this._customClasses[+classId]);\r\n    }\r\n  }\r\n\r\n  isButtonHidden(name: string): boolean {\r\n    if (!name) {\r\n      return false;\r\n    }\r\n    if (!(this.hiddenButtons instanceof Array)) {\r\n      return false;\r\n    }\r\n    let result: any;\r\n    for (const arr of this.hiddenButtons) {\r\n      if (arr instanceof Array) {\r\n        result = arr.find(item => item === name);\r\n      }\r\n      if (result) {\r\n        break;\r\n      }\r\n    }\r\n    return result !== undefined;\r\n  }\r\n\r\n  focus() {\r\n    this.execute.emit('focus');\r\n    console.log('focused');\r\n  }\r\n}\r\n","<div class=\"angular-editor-toolbar\" *ngIf=\"showToolbar\">\r\n  <div class=\"angular-editor-toolbar-set\">\r\n    <button type=\"button\" title=\"Undo\" class=\"angular-editor-button\" (click)=\"triggerCommand('undo')\"\r\n            [hidden]=\"isButtonHidden('undo')\" tabindex=\"-1\"><i\r\n      class='fa fa-undo'></i></button>\r\n    <button type=\"button\" title=\"Redo\" class=\"angular-editor-button\" (click)=\"triggerCommand('redo')\"\r\n            [hidden]=\"isButtonHidden('redo')\" tabindex=\"-1\"><i\r\n      class='fa fa-repeat'></i></button>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n    <button [id]=\"'bold-'+id\" type=\"button\" title=\"Bold\" class=\"angular-editor-button\" (click)=\"triggerCommand('bold')\"\r\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('bold')\" tabindex=\"-1\"><i class='fa fa-bold'></i></button>\r\n    <button [id]=\"'italic-'+id\" type=\"button\" title=\"Italic\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('italic')\"\r\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('italic')\" tabindex=\"-1\"><i class='fa fa-italic'></i>\r\n    </button>\r\n    <button [id]=\"'underline-'+id\" type=\"button\" title=\"Underline\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('underline')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('underline')\"\r\n            tabindex=\"-1\"><i class='fa fa-underline'></i></button>\r\n    <button [id]=\"'strikeThrough-'+id\" type=\"button\" title=\"Strikethrough\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('strikeThrough')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('strikeThrough')\"\r\n            tabindex=\"-1\"><i class='fa fa-strikethrough'></i></button>\r\n    <button [id]=\"'subscript-'+id\" type=\"button\" title=\"Subscript\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('subscript')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('subscript')\"\r\n            tabindex=\"-1\"><i class='fa fa-subscript'></i></button>\r\n    <button [id]=\"'superscript-'+id\" type=\"button\" title=\"Superscript\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('superscript')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('superscript')\"\r\n            tabindex=\"-1\"><i class='fa fa-superscript'></i></button>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n    <button [id]=\"'justifyLeft-'+id\" type=\"button\" title=\"Justify Left\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('justifyLeft')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('justifyLeft')\"\r\n            tabindex=\"-1\"><i\r\n      class='fa fa-align-left'></i></button>\r\n    <button [id]=\"'justifyCenter-'+id\" type=\"button\" title=\"Justify Center\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('justifyCenter')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('justifyCenter')\"\r\n            tabindex=\"-1\"><i\r\n      class='fa fa-align-center'></i></button>\r\n    <button [id]=\"'justifyRight-'+id\" type=\"button\" title=\"Justify Right\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('justifyRight')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('justifyRight')\"\r\n            tabindex=\"-1\">\r\n      <i class='fa fa-align-right'></i></button>\r\n    <button [id]=\"'justifyFull-'+id\" type=\"button\" title=\"Justify Full\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('justifyFull')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('justifyFull')\"\r\n            tabindex=\"-1\"><i\r\n      class='fa fa-align-justify'></i></button>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n    <button [id]=\"'indent-'+id\" type=\"button\" title=\"Indent\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('indent')\"\r\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('indent')\" tabindex=\"-1\"><i\r\n      class='fa fa-indent'></i></button>\r\n    <button [id]=\"'outdent-'+id\" type=\"button\" title=\"Outdent\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('outdent')\"\r\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('outdent')\" tabindex=\"-1\"><i\r\n      class='fa fa-outdent'></i></button>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n    <button [id]=\"'insertUnorderedList-'+id\" type=\"button\" title=\"Unordered List\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('insertUnorderedList')\" [disabled]=\"htmlMode\"\r\n            [hidden]=\"isButtonHidden('insertUnorderedList')\" tabindex=\"-1\"><i\r\n      class='fa fa-list-ul'></i></button>\r\n    <button [id]=\"'insertOrderedList-'+id\" type=\"button\" title=\"Ordered List\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('insertOrderedList')\" [disabled]=\"htmlMode\"\r\n            [hidden]=\"isButtonHidden('insertOrderedList')\" tabindex=\"-1\"><i\r\n      class='fa fa-list-ol'></i></button>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n\r\n    <ae-select class=\"select-heading\" [options]=\"headings\"\r\n               [(ngModel)]=\"block\"\r\n               (change)=\"triggerCommand(block)\"\r\n               [disabled]=\"htmlMode\"\r\n               [hidden]=\"isButtonHidden('heading')\"\r\n               tabindex=\"-1\"></ae-select>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n\r\n    <ae-select class=\"select-font\" [options]=\"fonts\"\r\n               [(ngModel)]=\"fontName\"\r\n               (change)=\"setFontName(fontName)\"\r\n               [disabled]=\"htmlMode\"\r\n               [hidden]=\"isButtonHidden('fontName')\"\r\n               tabindex=\"-1\"></ae-select>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n\r\n    <ae-select class=\"select-font-size\" [options]=\"fontSizes\"\r\n               [(ngModel)]=\"fontSize\"\r\n               (change)=\"setFontSize(fontSize)\"\r\n               [disabled]=\"htmlMode\"\r\n               [hidden]=\"isButtonHidden('fontSize')\"\r\n               tabindex=\"-1\">\r\n    </ae-select>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n    <input\r\n      style=\"display: none\"\r\n      type=\"color\" (change)=\"insertColor(fgInput.value, 'textColor')\"\r\n      #fgInput>\r\n    <button [id]=\"'foregroundColorPicker-'+id\" type=\"button\" class=\"angular-editor-button\" (click)=\"focus(); ; fgInput.click()\"\r\n            title=\"Text Color\"\r\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('textColor')\" tabindex=\"-1\"><span\r\n      class=\"color-label foreground\"><i class=\"fa fa-font\"></i></span>\r\n    </button>\r\n    <input\r\n      style=\"display: none\"\r\n      type=\"color\" (change)=\"insertColor(bgInput.value, 'backgroundColor')\"\r\n      #bgInput>\r\n    <button [id]=\"'backgroundColorPicker-'+id\" type=\"button\" class=\"angular-editor-button\" (click)=\"focus(); ; bgInput.click()\"\r\n            title=\"Background Color\"\r\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('backgroundColor')\" tabindex=\"-1\"><span\r\n      class=\"color-label background\"><i class=\"fa fa-font\"></i></span>\r\n    </button>\r\n  </div>\r\n  <div *ngIf=\"_customClasses\" class=\"angular-editor-toolbar-set\">\r\n    <ae-select class=\"select-custom-style\" [options]=\"customClassList\"\r\n               [(ngModel)]=\"customClassId\"\r\n               (change)=\"setCustomClass(customClassId)\"\r\n               [disabled]=\"htmlMode\"\r\n               [hidden]=\"isButtonHidden('customClasses')\"\r\n               tabindex=\"-1\"></ae-select>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n    <button [id]=\"'link-'+id\" type=\"button\" class=\"angular-editor-button\" (click)=\"insertUrl()\"\r\n            title=\"Insert Link\" [disabled]=\"isLinkButtonDisabled\" [hidden]=\"isButtonHidden('link')\" tabindex=\"-1\">\r\n      <i class=\"fa fa-link\"></i>\r\n    </button>\r\n    <button [id]=\"'unlink-'+id\" type=\"button\" class=\"angular-editor-button\" (click)=\"triggerCommand('unlink')\"\r\n            title=\"Unlink\" [disabled]=\"htmlMode || !linkSelected\" [hidden]=\"isButtonHidden('unlink')\" tabindex=\"-1\">\r\n      <i class=\"fa fa-chain-broken\"></i>\r\n    </button>\r\n    <input\r\n      style=\"display: none\"\r\n      accept=\"image/*\"\r\n      type=\"file\" (change)=\"onFileChanged($event)\"\r\n      #fileInput>\r\n    <button [id]=\"'insertImage-'+id\" type=\"button\" class=\"angular-editor-button\" (click)=\"focus(); fileInput.click()\"\r\n            title=\"Insert Image\"\r\n            [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('insertImage')\" tabindex=\"-1\"><i class=\"fa fa-image\"></i>\r\n    </button>\r\n    <button [id]=\"'insertVideo-'+id\" type=\"button\" class=\"angular-editor-button\"\r\n            (click)=\"insertVideo()\" title=\"Insert Video\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('insertVideo')\"\r\n            tabindex=\"-1\"><i\r\n      class=\"fa fa-video-camera\"></i></button>\r\n    <button [id]=\"'insertHorizontalRule-'+id\" type=\"button\" title=\"Horizontal Line\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('insertHorizontalRule')\" [disabled]=\"htmlMode\"\r\n            [hidden]=\"isButtonHidden('insertHorizontalRule')\" tabindex=\"-1\"><i\r\n      class=\"fa fa-minus\"></i></button>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n    <button [id]=\"'clearFormatting-'+id\" type=\"button\" title=\"Clear Formatting\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('removeFormat')\" [disabled]=\"htmlMode\" [hidden]=\"isButtonHidden('removeFormat')\"\r\n            tabindex=\"-1\"><i class='fa fa-remove'></i>\r\n    </button>\r\n  </div>\r\n  <div class=\"angular-editor-toolbar-set\">\r\n    <button [id]=\"'toggleEditorMode-'+id\" type=\"button\" title=\"HTML Code\" class=\"angular-editor-button\"\r\n            (click)=\"triggerCommand('toggleEditorMode')\" [hidden]=\"isButtonHidden('toggleEditorMode')\" tabindex=\"-1\"><i\r\n      class='fa fa-code'></i></button>\r\n  </div>\r\n  <ng-content></ng-content>\r\n</div>\r\n","import {Inject, Injectable} from '@angular/core';\r\nimport {HttpClient, HttpEvent} from '@angular/common/http';\r\nimport {Observable} from 'rxjs';\r\nimport {DOCUMENT} from '@angular/common';\r\nimport {CustomClass} from './config';\r\n\r\nexport interface UploadResponse {\r\n  imageUrl: string;\r\n}\r\n\r\n@Injectable()\r\nexport class AngularEditorService {\r\n\r\n  savedSelection: Range | null;\r\n  selectedText: string;\r\n  uploadUrl: string;\r\n  uploadWithCredentials: boolean;\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    @Inject(DOCUMENT) private doc: any\r\n  ) { }\r\n\r\n  /**\r\n   * Executed command from editor header buttons exclude toggleEditorMode\r\n   * @param command string from triggerCommand\r\n   * @param value\r\n   */\r\n  executeCommand(command: string, value?: string) {\r\n    const commands = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'p', 'pre'];\r\n    if (commands.includes(command)) {\r\n      this.doc.execCommand('formatBlock', false, command);\r\n      return;\r\n    }\r\n    this.doc.execCommand(command, false, value);\r\n  }\r\n\r\n  /**\r\n   * Create URL link\r\n   * @param url string from UI prompt\r\n   */\r\n  createLink(url: string) {\r\n    if (!url.includes('http')) {\r\n      this.doc.execCommand('createlink', false, url);\r\n    } else {\r\n      const newUrl = '<a href=\"' + url + '\" target=\"_blank\">' + this.selectedText + '</a>';\r\n      this.insertHtml(newUrl);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * insert color either font or background\r\n   *\r\n   * @param color color to be inserted\r\n   * @param where where the color has to be inserted either text/background\r\n   */\r\n  insertColor(color: string, where: string): void {\r\n    const restored = this.restoreSelection();\r\n    if (restored) {\r\n      if (where === 'textColor') {\r\n        this.doc.execCommand('foreColor', false, color);\r\n      } else {\r\n        this.doc.execCommand('hiliteColor', false, color);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set font name\r\n   * @param fontName string\r\n   */\r\n  setFontName(fontName: string) {\r\n    this.doc.execCommand('fontName', false, fontName);\r\n  }\r\n\r\n  /**\r\n   * Set font size\r\n   * @param fontSize string\r\n   */\r\n  setFontSize(fontSize: string) {\r\n    this.doc.execCommand('fontSize', false, fontSize);\r\n  }\r\n\r\n  /**\r\n   * Create raw HTML\r\n   * @param html HTML string\r\n   */\r\n  insertHtml(html: string): void {\r\n\r\n    const isHTMLInserted = this.doc.execCommand('insertHTML', false, html);\r\n\r\n    if (!isHTMLInserted) {\r\n      throw new Error('Unable to perform the operation');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * save selection when the editor is focussed out\r\n   */\r\n  public saveSelection = (): void => {\r\n    if (this.doc.getSelection) {\r\n      const sel = this.doc.getSelection();\r\n      if (sel.getRangeAt && sel.rangeCount) {\r\n        this.savedSelection = sel.getRangeAt(0);\r\n        this.selectedText = sel.toString();\r\n      }\r\n    } else if (this.doc.getSelection && this.doc.createRange) {\r\n      this.savedSelection = document.createRange();\r\n    } else {\r\n      this.savedSelection = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * restore selection when the editor is focused in\r\n   *\r\n   * saved selection when the editor is focused out\r\n   */\r\n  restoreSelection(): boolean {\r\n    if (this.savedSelection) {\r\n      if (this.doc.getSelection) {\r\n        const sel = this.doc.getSelection();\r\n        sel.removeAllRanges();\r\n        sel.addRange(this.savedSelection);\r\n        return true;\r\n      } else if (this.doc.getSelection /*&& this.savedSelection.select*/) {\r\n        // this.savedSelection.select();\r\n        return true;\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * setTimeout used for execute 'saveSelection' method in next event loop iteration\r\n   */\r\n  public executeInNextQueueIteration(callbackFn: (...args: any[]) => any, timeout = 1e2): void {\r\n    setTimeout(callbackFn, timeout);\r\n  }\r\n\r\n  /** check any selection is made or not */\r\n  private checkSelection(): any {\r\n\r\n    const selectedText = this.savedSelection.toString();\r\n\r\n    if (selectedText.length === 0) {\r\n      throw new Error('No Selection Made');\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Upload file to uploadUrl\r\n   * @param file The file\r\n   */\r\n  uploadImage(file: File): Observable<HttpEvent<UploadResponse>> {\r\n\r\n    const uploadData: FormData = new FormData();\r\n\r\n    uploadData.append('file', file, file.name);\r\n\r\n    return this.http.post<UploadResponse>(this.uploadUrl, uploadData, {\r\n      reportProgress: true,\r\n      observe: 'events',\r\n      withCredentials: this.uploadWithCredentials,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Insert image with Url\r\n   * @param imageUrl The imageUrl.\r\n   */\r\n  insertImage(imageUrl: string) {\r\n    this.doc.execCommand('insertImage', false, imageUrl);\r\n  }\r\n\r\n  setDefaultParagraphSeparator(separator: string) {\r\n    this.doc.execCommand('defaultParagraphSeparator', false, separator);\r\n  }\r\n\r\n  createCustomClass(customClass: CustomClass) {\r\n    let newTag = this.selectedText;\r\n    if (customClass) {\r\n      const tagName = customClass.tag ? customClass.tag : 'span';\r\n      newTag = '<' + tagName + ' class=\"' + customClass.class + '\">' + this.selectedText + '</' + tagName + '>';\r\n    }\r\n    this.insertHtml(newTag);\r\n  }\r\n\r\n  insertVideo(videoUrl: string) {\r\n    if (videoUrl.match('www.youtube.com')) {\r\n      this.insertYouTubeVideoTag(videoUrl);\r\n    }\r\n    if (videoUrl.match('vimeo.com')) {\r\n      this.insertVimeoVideoTag(videoUrl);\r\n    }\r\n  }\r\n\r\n  private insertYouTubeVideoTag(videoUrl: string): void {\r\n    const id = videoUrl.split('v=')[1];\r\n    const imageUrl = `https://img.youtube.com/vi/${id}/0.jpg`;\r\n    const thumbnail = `\r\n      <div style='position: relative'>\r\n        <a href='${videoUrl}' target='_blank'>\r\n          <img src=\"${imageUrl}\" alt=\"click to watch\"/>\r\n          <img style='position: absolute; left:200px; top:140px'\r\n          src=\"https://img.icons8.com/color/96/000000/youtube-play.png\"/>\r\n        </a>\r\n      </div>`;\r\n    this.insertHtml(thumbnail);\r\n  }\r\n\r\n  private insertVimeoVideoTag(videoUrl: string): void {\r\n    const sub = this.http.get<any>(`https://vimeo.com/api/oembed.json?url=${videoUrl}`).subscribe(data => {\r\n      const imageUrl = data.thumbnail_url_with_play_button;\r\n      const thumbnail = `<div>\r\n        <a href='${videoUrl}' target='_blank'>\r\n          <img src=\"${imageUrl}\" alt=\"${data.title}\"/>\r\n        </a>\r\n      </div>`;\r\n      this.insertHtml(thumbnail);\r\n      sub.unsubscribe();\r\n    });\r\n  }\r\n\r\n  nextNode(node) {\r\n    if (node.hasChildNodes()) {\r\n      return node.firstChild;\r\n    } else {\r\n      while (node && !node.nextSibling) {\r\n        node = node.parentNode;\r\n      }\r\n      if (!node) {\r\n        return null;\r\n      }\r\n      return node.nextSibling;\r\n    }\r\n  }\r\n\r\n  getRangeSelectedNodes(range, includePartiallySelectedContainers) {\r\n    let node = range.startContainer;\r\n    const endNode = range.endContainer;\r\n    let rangeNodes = [];\r\n\r\n    // Special case for a range that is contained within a single node\r\n    if (node === endNode) {\r\n      rangeNodes = [node];\r\n    } else {\r\n      // Iterate nodes until we hit the end container\r\n      while (node && node !== endNode) {\r\n        rangeNodes.push( node = this.nextNode(node) );\r\n      }\r\n\r\n      // Add partially selected nodes at the start of the range\r\n      node = range.startContainer;\r\n      while (node && node !== range.commonAncestorContainer) {\r\n        rangeNodes.unshift(node);\r\n        node = node.parentNode;\r\n      }\r\n    }\r\n\r\n    // Add ancestors of the range container, if required\r\n    if (includePartiallySelectedContainers) {\r\n      node = range.commonAncestorContainer;\r\n      while (node) {\r\n        rangeNodes.push(node);\r\n        node = node.parentNode;\r\n      }\r\n    }\r\n\r\n    return rangeNodes;\r\n  }\r\n\r\n  getSelectedNodes() {\r\n    const nodes = [];\r\n    if (this.doc.getSelection) {\r\n      const sel = this.doc.getSelection();\r\n      for (let i = 0, len = sel.rangeCount; i < len; ++i) {\r\n        nodes.push.apply(nodes, this.getRangeSelectedNodes(sel.getRangeAt(i), true));\r\n      }\r\n    }\r\n    return nodes;\r\n  }\r\n\r\n  replaceWithOwnChildren(el) {\r\n    const parent = el.parentNode;\r\n    while (el.hasChildNodes()) {\r\n      parent.insertBefore(el.firstChild, el);\r\n    }\r\n    parent.removeChild(el);\r\n  }\r\n\r\n  removeSelectedElements(tagNames) {\r\n    const tagNamesArray = tagNames.toLowerCase().split(',');\r\n    this.getSelectedNodes().forEach((node) => {\r\n      if (node.nodeType === 1 &&\r\n        tagNamesArray.indexOf(node.tagName.toLowerCase()) > -1) {\r\n        // Remove the node and replace it with its children\r\n        this.replaceWithOwnChildren(node);\r\n      }\r\n    });\r\n  }\r\n}\r\n","import {Component, ViewEncapsulation} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'ae-toolbar-set',\r\n  templateUrl: './ae-toolbar-set.component.html',\r\n  styleUrls: ['./ae-toolbar-set.component.scss'],\r\n  encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class AeToolbarSetComponent {\r\n\r\n  constructor() { }\r\n\r\n}\r\n","<div class=\"angular-editor-toolbar-set\">\r\n  <ng-content></ng-content>\r\n</div>\r\n","import {Component, EventEmitter, Input, Output, ViewEncapsulation} from '@angular/core';\r\n\r\n\r\n@Component({\r\n  selector: 'ae-button',\r\n  templateUrl: './ae-button.component.html',\r\n  styleUrls: ['./ae-button.component.scss'],\r\n  encapsulation: ViewEncapsulation.None,\r\n})\r\nexport class AeButtonComponent {\r\n\r\n  @Input() iconClass = '';\r\n  @Input() title = '';\r\n  @Output() buttonClick = new EventEmitter();\r\n\r\n  constructor() { }\r\n\r\n}\r\n","<button type=\"button\" [title]=\"title\" class=\"angular-editor-button\" (click)=\"buttonClick.emit()\" tabindex=\"-1\"><i\r\n    [class]=\"iconClass\"></i></button>\r\n\r\n","import { UploadResponse } from './angular-editor.service';\r\nimport { HttpEvent } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\n\r\nexport interface CustomClass {\r\n  name: string;\r\n  class: string;\r\n  tag?: string;\r\n}\r\n\r\nexport interface Font {\r\n  name: string;\r\n  class: string;\r\n}\r\n\r\nexport interface AngularEditorConfig {\r\n  editable?: boolean;\r\n  spellcheck?: boolean;\r\n  height?: 'auto' | string;\r\n  minHeight?: '0' | string;\r\n  maxHeight?: 'auto' | string;\r\n  width?: 'auto' | string;\r\n  minWidth?: '0' | string;\r\n  translate?: 'yes' | 'now' | string;\r\n  enableToolbar?: boolean;\r\n  showToolbar?: boolean;\r\n  placeholder?: string;\r\n  defaultParagraphSeparator?: string;\r\n  defaultFontName?: string;\r\n  defaultFontSize?: '1' | '2' | '3' | '4' | '5' | '6' | '7' | string;\r\n  uploadUrl?: string;\r\n  upload?: (file: File) => Observable<HttpEvent<UploadResponse>>;\r\n  uploadWithCredentials?: boolean;\r\n  fonts?: Font[];\r\n  customClasses?: CustomClass[];\r\n  sanitize?: boolean;\r\n  toolbarPosition?: 'top' | 'bottom';\r\n  outline?: boolean;\r\n  toolbarHiddenButtons?: string[][];\r\n  rawPaste?: boolean;\r\n}\r\n\r\nexport const angularEditorConfig: AngularEditorConfig = {\r\n  editable: true,\r\n  spellcheck: true,\r\n  height: 'auto',\r\n  minHeight: '0',\r\n  maxHeight: 'auto',\r\n  width: 'auto',\r\n  minWidth: '0',\r\n  translate: 'yes',\r\n  enableToolbar: true,\r\n  showToolbar: true,\r\n  placeholder: 'Enter text here...',\r\n  defaultParagraphSeparator: '',\r\n  defaultFontName: '',\r\n  defaultFontSize: '',\r\n  fonts: [\r\n    {class: 'arial', name: 'Arial'},\r\n    {class: 'times-new-roman', name: 'Times New Roman'},\r\n    {class: 'calibri', name: 'Calibri'},\r\n    {class: 'comic-sans-ms', name: 'Comic Sans MS'}\r\n  ],\r\n  uploadUrl: 'v1/image',\r\n  uploadWithCredentials: false,\r\n  sanitize: true,\r\n  toolbarPosition: 'top',\r\n  outline: true,\r\n  /*toolbarHiddenButtons: [\r\n    ['bold', 'italic', 'underline', 'strikeThrough', 'superscript', 'subscript'],\r\n    ['heading', 'fontName', 'fontSize', 'color'],\r\n    ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull', 'indent', 'outdent'],\r\n    ['cut', 'copy', 'delete', 'removeFormat', 'undo', 'redo'],\r\n    ['paragraph', 'blockquote', 'removeBlockquote', 'horizontalLine', 'orderedList', 'unorderedList'],\r\n    ['link', 'unlink', 'image', 'video']\r\n  ]*/\r\n};\r\n","export function isDefined(value: any) {\r\n  return value !== undefined && value !== null;\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {AngularEditorComponent} from './angular-editor.component';\r\nimport {AngularEditorToolbarComponent} from './angular-editor-toolbar.component';\r\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\r\nimport {CommonModule} from '@angular/common';\r\nimport { AeSelectComponent } from './ae-select/ae-select.component';\r\nimport {AeButtonComponent} from \"./ae-button/ae-button.component\";\r\nimport { AeToolbarSetComponent } from './ae-toolbar-set/ae-toolbar-set.component';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule, FormsModule, ReactiveFormsModule\r\n  ],\r\n  declarations: [AngularEditorComponent, AngularEditorToolbarComponent, AeSelectComponent, AeButtonComponent, AeToolbarSetComponent],\r\n  exports: [AngularEditorComponent, AngularEditorToolbarComponent, AeButtonComponent, AeToolbarSetComponent]\r\n})\r\nexport class CustomAngularEditorModule {\r\n}\r\n"]}