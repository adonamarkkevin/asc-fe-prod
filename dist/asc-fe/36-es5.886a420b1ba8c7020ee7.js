!function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function t(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{piSE:function(e,n,a){"use strict";a.d(n,"a",(function(){return o}));var o=t((function e(){r(this,e)}))},qZlX:function(e,n,a){"use strict";a.r(n),a.d(n,"ReportsModule",(function(){return q}));var o=a("ofXK"),i=a("tyNb"),p=a("3Pt+"),m=a("M0ag"),l=a("piSE"),d=a("za27"),s=a("fXoL"),c=a("dJ3e"),y=a("JqCM"),u=a("kmnG"),f=a("qFsG"),h=a("iadO"),v=a("d3UM"),T=a("bTqV"),g=a("FKr1");function R(e,t){if(1&e){var r=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"mat-option",19),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](r);var e=t.$implicit;return s["\u0275\u0275nextContext"](2).setReportType(e)})),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()}if(2&e){var n=t.$implicit;s["\u0275\u0275property"]("value",n),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function E(e,t){if(1&e){var r=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"mat-option",19),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](r);var e=t.$implicit;return s["\u0275\u0275nextContext"](3).setPaymentType(e.id)})),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()}if(2&e){var n=t.$implicit;s["\u0275\u0275property"]("value",n.id),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.paymentDescription," ")}}function M(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-form-field",5),s["\u0275\u0275elementStart"](1,"mat-label"),s["\u0275\u0275text"](2,"Payment Type:"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"mat-select",20),s["\u0275\u0275template"](4,E,2,2,"mat-option",13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var r=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngForOf",r.paymentTypeList)}}function S(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",23),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var r=t.$implicit;s["\u0275\u0275property"]("value",r.id),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",r.companyName," ")}}function F(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-form-field",5),s["\u0275\u0275elementStart"](1,"mat-label"),s["\u0275\u0275text"](2,"Company:"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"mat-select",21),s["\u0275\u0275template"](4,S,2,2,"mat-option",22),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var r=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngForOf",r.activeCompanyList)}}function C(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",23),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var r=t.$implicit;s["\u0275\u0275property"]("value",r.id),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",r.name," ")}}function _(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-form-field",5),s["\u0275\u0275elementStart"](1,"mat-label"),s["\u0275\u0275text"](2,"Applicant:"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"mat-select",24),s["\u0275\u0275template"](4,C,2,2,"mat-option",22),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var r=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngForOf",r.applicants)}}function P(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",23),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var r=t.$implicit;s["\u0275\u0275property"]("value",r.id),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",r.name," ")}}function A(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-form-field",5),s["\u0275\u0275elementStart"](1,"mat-label"),s["\u0275\u0275text"](2,"Screener:"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"mat-select",25),s["\u0275\u0275template"](4,P,2,2,"mat-option",22),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var r=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngForOf",r.screeners)}}function x(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-option",23),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()),2&e){var r=t.$implicit;s["\u0275\u0275property"]("value",r.id),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",null==r?null:r.description," ")}}function O(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"mat-form-field",5),s["\u0275\u0275elementStart"](1,"mat-label"),s["\u0275\u0275text"](2,"Mediums:"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](3,"mat-select",26),s["\u0275\u0275template"](4,x,2,2,"mat-option",22),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){var r=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("ngForOf",r.typeOfMediums)}}function w(e,t){if(1&e){var r=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275elementStart"](1,"form",4),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"mat-form-field",5),s["\u0275\u0275elementStart"](4,"mat-label"),s["\u0275\u0275text"](5,"Date Start:"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"input",6),s["\u0275\u0275listener"]("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](r),s["\u0275\u0275nextContext"]().dateFrome=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](7,"mat-datepicker-toggle",7),s["\u0275\u0275element"](8,"mat-datepicker",8,9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"mat-form-field",5),s["\u0275\u0275elementStart"](11,"mat-label"),s["\u0275\u0275text"](12,"Date End:"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"input",10),s["\u0275\u0275listener"]("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](r),s["\u0275\u0275nextContext"]().dateTo=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](14,"mat-datepicker-toggle",7),s["\u0275\u0275element"](15,"mat-datepicker",8,11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"div",1),s["\u0275\u0275elementStart"](18,"mat-form-field",5),s["\u0275\u0275elementStart"](19,"mat-label"),s["\u0275\u0275text"](20,"Report Type: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"mat-select",12),s["\u0275\u0275listener"]("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](r),s["\u0275\u0275nextContext"]().reportType=e})),s["\u0275\u0275template"](22,R,2,2,"mat-option",13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](23,M,5,1,"mat-form-field",14),s["\u0275\u0275template"](24,F,5,1,"mat-form-field",14),s["\u0275\u0275template"](25,_,5,1,"mat-form-field",14),s["\u0275\u0275template"](26,A,5,1,"mat-form-field",14),s["\u0275\u0275template"](27,O,5,1,"mat-form-field",14),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](28,"div",1),s["\u0275\u0275element"](29,"div",15),s["\u0275\u0275elementStart"](30,"div",16),s["\u0275\u0275elementStart"](31,"button",17),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](r),s["\u0275\u0275nextContext"]().generateReport()})),s["\u0275\u0275elementStart"](32,"i",18),s["\u0275\u0275text"](33,"task_alt"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](34," GENERATE "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](35,"br"),s["\u0275\u0275element"](36,"br"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var n=s["\u0275\u0275reference"](9),a=s["\u0275\u0275reference"](16),o=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("formGroup",o.reportForm),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("matDatepicker",n)("ngModel",o.dateFrome),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("for",n),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("matDatepicker",a)("ngModel",o.dateTo),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("for",a),s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngModel",o.reportType),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",o.reportTypeList),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",o.selectedReportType!==o.reportTypes.VAT_SUMMARY&&o.selectedReportType!==o.reportTypes.TAX_SUMMARY),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",o.selectedReportType===o.reportTypes.COLLECTION_REPORT||o.selectedReportType===o.reportTypes.REPORT_PER_COMPANY||o.selectedReportType===o.reportTypes.REPORT_PER_AGENCY),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",o.selectedReportType===o.reportTypes.COLLECTION_REPORT||o.selectedReportType===o.reportTypes.REPORT_PER_APPLICANT),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",o.selectedReportType===o.reportTypes.COLLECTION_REPORT||o.selectedReportType===o.reportTypes.REPORT_PER_SCREENER),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",o.selectedReportType===o.reportTypes.REPORT_PER_MEDIUM),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("disabled",(null==o.reportForm.controls.dateFrom||null==o.reportForm.controls.dateFrom.errors?null:o.reportForm.controls.dateFrom.errors.required)||(null==o.reportForm.controls.dateTo||null==o.reportForm.controls.dateTo.errors?null:o.reportForm.controls.dateTo.errors.required)||(null==o.reportForm.controls.reportType||null==o.reportForm.controls.reportType.errors?null:o.reportForm.controls.reportType.errors.required)||!o.isPaymentTypeRequired)}}function b(e,t){if(1&e){var r=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"mat-option",19),s["\u0275\u0275listener"]("click",(function(){s["\u0275\u0275restoreView"](r);var e=t.$implicit;return s["\u0275\u0275nextContext"](2).setReportType(e.filename)})),s["\u0275\u0275text"](1),s["\u0275\u0275elementEnd"]()}if(2&e){var n=t.$implicit;s["\u0275\u0275property"]("value",n.filename),s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function I(e,t){if(1&e){var r=s["\u0275\u0275getCurrentView"]();s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275elementStart"](1,"form",4),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"mat-form-field",5),s["\u0275\u0275elementStart"](4,"mat-label"),s["\u0275\u0275text"](5,"Date Start:"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"input",6),s["\u0275\u0275listener"]("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](r),s["\u0275\u0275nextContext"]().dateFrome=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](7,"mat-datepicker-toggle",7),s["\u0275\u0275element"](8,"mat-datepicker",8,9),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](10,"mat-form-field",5),s["\u0275\u0275elementStart"](11,"mat-label"),s["\u0275\u0275text"](12,"Date End:"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"input",10),s["\u0275\u0275listener"]("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](r),s["\u0275\u0275nextContext"]().dateTo=e})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](14,"mat-datepicker-toggle",7),s["\u0275\u0275element"](15,"mat-datepicker",8,11),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"mat-form-field",5),s["\u0275\u0275elementStart"](18,"mat-label"),s["\u0275\u0275text"](19,"Report Type: "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"mat-select",12),s["\u0275\u0275listener"]("ngModelChange",(function(e){return s["\u0275\u0275restoreView"](r),s["\u0275\u0275nextContext"]().reportType=e})),s["\u0275\u0275template"](21,b,2,2,"mat-option",13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"div",1),s["\u0275\u0275element"](23,"div",15),s["\u0275\u0275elementStart"](24,"div",16),s["\u0275\u0275elementStart"](25,"button",17),s["\u0275\u0275listener"]("click",(function(){return s["\u0275\u0275restoreView"](r),s["\u0275\u0275nextContext"]().generateReport()})),s["\u0275\u0275elementStart"](26,"i",18),s["\u0275\u0275text"](27,"task_alt"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275text"](28," GENERATE "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](29,"br"),s["\u0275\u0275element"](30,"br"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()}if(2&e){var n=s["\u0275\u0275reference"](9),a=s["\u0275\u0275reference"](16),o=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("formGroup",o.newReportForm),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("matDatepicker",n)("ngModel",o.dateFrome),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("for",n),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("matDatepicker",a)("ngModel",o.dateTo),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("for",a),s["\u0275\u0275advance"](6),s["\u0275\u0275property"]("ngModel",o.reportType),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngForOf",o.newReportTypeList),s["\u0275\u0275advance"](4),s["\u0275\u0275property"]("disabled",(null==o.newReportForm.controls.dateFrom||null==o.newReportForm.controls.dateFrom.errors?null:o.newReportForm.controls.dateFrom.errors.required)||(null==o.newReportForm.controls.reportType||null==o.newReportForm.controls.reportType.errors?null:o.newReportForm.controls.reportType.errors.required))}}var N,k,D,L=[{path:"",component:(N=function(){function e(t,n,a,o,i,p){r(this,e),this.dataStorage=t,this.apiService=n,this.formBuilder=a,this.sweetAlertService=o,this.datepipe=i,this.spinner=p,this.report=new d.a,this.paymentMethod=new l.a,this.reportTypes=m.y,this.reportTypeList=[{name:m.y.COLLECTION_REPORT,filename:"Collection_Report"},{name:m.y.VAT_SUMMARY,filename:"VAT_TAX_Summary"},{name:m.y.TAX_SUMMARY,filename:"VAT_TAX_Summary"},{name:m.y.REPORT_PER_COMPANY,filename:"Per_Company"},{name:m.y.REPORT_PER_AGENCY,filename:"Per_Agency"},{name:m.y.REPORT_PER_SCREENER,filename:"Per_Screener"},{name:m.y.REPORT_PER_MEDIUM,filename:"Per_Type_Of_Medium"},{name:m.y.REPORT_PER_APPLICANT,filename:"Per_Applicant"}],this.applicants=[],this.screeners=[],this.newReportTypeList=[{name:"Application Per Decision",filename:"Application_Per_Decision"},{name:"Screeners Productivity",filename:"Screeners_Productivity"},{name:"Ad Specialists-Encoders",filename:"Ad_Specialists-Encoders"},{name:"Top 20 Agencies",filename:"Top_20_Agencies"},{name:"Top 20 Categories(by Decision)",filename:"Top_20_Categories(by_Decision)"},{name:"Top 5 Categories Disapproval",filename:"Top_5_Categories_Disapproval"},{name:"Top 5 Agencies Disapproval",filename:"Top_5_Agencies_Disapproval"},{name:"Decision Per Type of medium",filename:"Decision_per_type_of_medium"},{name:"Top 20 Clients(with Medium)",filename:"Top_20_Clients(with_Medium)"},{name:"Top 20 Categories(with Medium)",filename:"Top_20_Categories(with_Medium)"},{name:"Top 20 Clients",filename:"Top_20_Clients"},{name:"Top 20 Agencies(with client)",filename:"Top_20_Agencies(with_client)"}],this.paymentTypeList=[],this.activeCompanyList=[],this.isPaymentTypeRequired=!0,this.paymentTypeAll={id:0,paymentDescription:"All"}}return t(e,[{key:"ngOnInit",value:function(){this.currentUser=this.dataStorage.getUserAccount(),this.setFormValidator(),this.getPaymentType(),this.getActiveCompanies(),console.log(this.currentUser.userRole.name),this.getApplicants(),this.getScreeners(),this.getTypeOfMediums()}},{key:"ngOnDestroy",value:function(){}},{key:"getApplicants",value:function(){var e=this;this.apiService.findAll(m.n.userAccountType+"/APPLICANT").subscribe((function(t){var r,n,a;e.applicants.push({name:"ALL",id:0}),(null===(r=null==t?void 0:t.responseData)||void 0===r?void 0:r.data)&&(null===(a=null===(n=null==t?void 0:t.responseData)||void 0===n?void 0:n.data)||void 0===a?void 0:a.length)&&t.responseData.data.filter((function(t){e.applicants.push({name:"".concat(t.firstName," ").concat(t.middleName," ").concat(t.lastName),id:t.id})}))}))}},{key:"setFormValidator",value:function(){"ROLE_ACCOUNTING"===this.currentUser.userRole.name?this.reportForm=this.formBuilder.group({reportType:["",[p.H.required]],paymentType:[0],company:[0],applicant:[0],screener:[0],medium:[0],dateFrom:["",[p.H.required]],dateTo:["",[p.H.required]]}):this.newReportForm=this.formBuilder.group({reportType:["",[p.H.required]],dateFrom:["",[p.H.required]],dateTo:["",[p.H.required]]})}},{key:"getPaymentType",value:function(){var e=this;this.apiService.findAll(m.n.paymentType).subscribe((function(t){e.paymentTypeList=t.responseData.data,e.paymentTypeList.unshift(e.paymentTypeAll)}))}},{key:"getScreeners",value:function(){var e=this;this.apiService.findAll(m.n.userPerRole+"8").subscribe((function(t){var r,n,a;e.screeners.push({name:"ALL",id:0}),(null===(r=null==t?void 0:t.responseData)||void 0===r?void 0:r.data)&&(null===(a=null===(n=null==t?void 0:t.responseData)||void 0===n?void 0:n.data)||void 0===a?void 0:a.length)&&t.responseData.data.filter((function(t){e.screeners.push({name:"".concat(t.firstName," ").concat(t.middleName," ").concat(t.lastName),id:t.id})}))}))}},{key:"getTypeOfMediums",value:function(){var e=this;this.apiService.findAll(""+m.n.typeOfMedium).subscribe((function(t){e.typeOfMediums=t.responseData.data,e.typeOfMediums.unshift({description:"ALL",id:0})}))}},{key:"getActiveCompanies",value:function(){var e=this;this.apiService.findAll(m.n.activeCompanies).subscribe((function(t){e.activeCompanyList=t.responseData.data,e.activeCompanyList.push({id:0,companyName:"All"}),e.activeCompanyList.sort((function(e,t){return e.id-t.id}))}))}},{key:"setReportType",value:function(e){"ROLE_ACCOUNTING"===this.currentUser.userRole.name?(this.selectedReportType=e.name,"Collection Report"===this.selectedReportType?this.isPaymentTypeRequired=!1:(this.reportForm.get("paymentType").patchValue(0),this.isPaymentTypeRequired=!0,this.selectedPaymentType=0)):this.selectedReportType=e}},{key:"setPaymentType",value:function(e){this.isPaymentTypeRequired=!0,this.selectedPaymentType=e}},{key:"generateReport",value:function(){var e=this;if(this.spinner.show(),this.report.format="xlsx",console.log("selected ",this.selectedReportType),"ROLE_ACCOUNTING"===this.currentUser.userRole.name){this.report.filename="VAT_TAX_Summary",this.report.module="Report",this.report.params={dateFrom:""+this.datepipe.transform(this.reportForm.get("dateFrom").value,"MM/dd/yyyy").toString(),dateTo:""+this.datepipe.transform(this.reportForm.get("dateTo").value,"MM/dd/yyyy"),reportType:this.reportType.filename};var t=m.n.validateReportsCollection+"/date-from/".concat(this.datepipe.transform(this.reportForm.get("dateFrom").value,"yyyy-MM-dd").toString(),"/date-to/").concat(this.datepipe.transform(this.reportForm.get("dateTo").value,"yyyy-MM-dd").toString());"Collection Report"===this.selectedReportType?(this.report.filename="Collection_Report",t=m.n.validateReportsCollection+"/date-from/".concat(this.datepipe.transform(this.reportForm.get("dateFrom").value,"yyyy-MM-dd").toString(),"/date-to/").concat(this.datepipe.transform(this.reportForm.get("dateTo").value,"yyyy-MM-dd").toString(),"/payment-type-id/").concat(this.selectedPaymentType),this.report.params={dateFrom:""+this.datepipe.transform(this.reportForm.get("dateFrom").value,"MM/dd/yyyy").toString(),dateTo:""+this.datepipe.transform(this.reportForm.get("dateTo").value,"MM/dd/yyyy"),paymentTypeId:this.selectedPaymentType}):this.selectedReportType===m.y.REPORT_PER_COMPANY?(this.report.filename="Per_Company",t=m.n.validateReportsCollection+"/date-from/".concat(this.datepipe.transform(this.reportForm.get("dateFrom").value,"yyyy-MM-dd").toString(),"/date-to/").concat(this.datepipe.transform(this.reportForm.get("dateTo").value,"yyyy-MM-dd").toString(),"/payment-type-id/").concat(this.selectedPaymentType),this.report.params={companyId:this.reportForm.get("company").value,dateFrom:""+this.datepipe.transform(this.reportForm.get("dateFrom").value,"MM/dd/yyyy").toString(),dateTo:""+this.datepipe.transform(this.reportForm.get("dateTo").value,"MM/dd/yyyy"),paymentTypeId:this.selectedPaymentType}):this.selectedReportType===m.y.REPORT_PER_AGENCY?(this.report.filename="Per_Agency",t=m.n.validateReportsCollection+"/date-from/".concat(this.datepipe.transform(this.reportForm.get("dateFrom").value,"yyyy-MM-dd").toString(),"/date-to/").concat(this.datepipe.transform(this.reportForm.get("dateTo").value,"yyyy-MM-dd").toString(),"/payment-type-id/").concat(this.selectedPaymentType),this.report.params={agencyId:this.reportForm.get("company").value,dateFrom:""+this.datepipe.transform(this.reportForm.get("dateFrom").value,"MM/dd/yyyy").toString(),dateTo:""+this.datepipe.transform(this.reportForm.get("dateTo").value,"MM/dd/yyyy"),paymentTypeId:this.selectedPaymentType}):this.selectedReportType===m.y.REPORT_PER_SCREENER?(this.report.filename="Per_Screener",t=m.n.validateReportsCollection+"/date-from/".concat(this.datepipe.transform(this.reportForm.get("dateFrom").value,"yyyy-MM-dd").toString(),"/date-to/").concat(this.datepipe.transform(this.reportForm.get("dateTo").value,"yyyy-MM-dd").toString(),"/payment-type-id/").concat(this.selectedPaymentType),this.report.params={screenerId:this.reportForm.get("screener").value,dateFrom:""+this.datepipe.transform(this.reportForm.get("dateFrom").value,"MM/dd/yyyy").toString(),dateTo:""+this.datepipe.transform(this.reportForm.get("dateTo").value,"MM/dd/yyyy"),paymentTypeId:this.selectedPaymentType}):this.selectedReportType===m.y.REPORT_PER_APPLICANT?(this.report.filename="Per_Applicant",t=m.n.validateReportsCollection+"/date-from/".concat(this.datepipe.transform(this.reportForm.get("dateFrom").value,"yyyy-MM-dd").toString(),"/date-to/").concat(this.datepipe.transform(this.reportForm.get("dateTo").value,"yyyy-MM-dd").toString(),"/payment-type-id/").concat(this.selectedPaymentType),this.report.params={applicantId:this.reportForm.get("applicant").value,dateFrom:""+this.datepipe.transform(this.reportForm.get("dateFrom").value,"MM/dd/yyyy").toString(),dateTo:""+this.datepipe.transform(this.reportForm.get("dateTo").value,"MM/dd/yyyy"),paymentTypeId:this.selectedPaymentType}):this.selectedReportType===m.y.REPORT_PER_MEDIUM?(this.report.filename="Per_Type_Of_Medium",t=m.n.validateReportsCollection+"/date-from/".concat(this.datepipe.transform(this.reportForm.get("dateFrom").value,"yyyy-MM-dd").toString(),"/date-to/").concat(this.datepipe.transform(this.reportForm.get("dateTo").value,"yyyy-MM-dd").toString(),"/payment-type-id/").concat(this.selectedPaymentType),this.report.params={typeOfMediumId:this.reportForm.get("medium").value,dateFrom:""+this.datepipe.transform(this.reportForm.get("dateFrom").value,"MM/dd/yyyy").toString(),dateTo:""+this.datepipe.transform(this.reportForm.get("dateTo").value,"MM/dd/yyyy"),paymentTypeId:this.selectedPaymentType}):"VAT Summary"===this.selectedReportType?this.report.params={dateFrom:""+this.datepipe.transform(this.reportForm.get("dateFrom").value,"MM/dd/yyyy").toString(),dateTo:""+this.datepipe.transform(this.reportForm.get("dateTo").value,"MM/dd/yyyy"),reportType:"vat"}:"TAX Summary"===this.selectedReportType&&(this.report.params={dateFrom:""+this.datepipe.transform(this.reportForm.get("dateFrom").value,"MM/dd/yyyy").toString(),dateTo:""+this.datepipe.transform(this.reportForm.get("dateTo").value,"MM/dd/yyyy"),reportType:"wtax"}),this.apiService.findAll(t).subscribe((function(t){t.length>0?e.printReport(e.report):(e.sweetAlertService.customErrorMessage("No Record found on date ranged"),e.spinner.hide())}))}else{this.report.filename=this.selectedReportType;var r=""+this.datepipe.transform(this.newReportForm.get("dateFrom").value,"MM/dd/yyyy").toString(),n=""+this.datepipe.transform(this.newReportForm.get("dateTo").value,"MM/dd/yyyy");this.report.module="AppData",this.report.params={dateFrom:r,dateTo:n},this.printReport(this.report)}}},{key:"printReport",value:function(e){var t=this;this.apiService.printReport(m.n.generateReports,e).subscribe((function(e){var r=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),n=URL.createObjectURL(r),a=document.createElement("a");a.download=t.selectedReportType+".xlsx",a.href=n,a.click(),"ROLE_ACCOUNTING"===t.currentUser.userRole.name?(t.reportForm.reset(),t.reportForm.patchValue({paymentType:0,company:0,applicant:0,screener:0,medium:0})):t.newReportForm.reset(),t.selectedReportType=null,t.sweetAlertService.customSuccessMessage("Successfully Generated!"),t.spinner.hide()}),(function(e){t.spinner.hide(),t.sweetAlertService.customErrorMessage("No Record found on date ranged")}))}}]),e}(),N.\u0275fac=function(e){return new(e||N)(s["\u0275\u0275directiveInject"](c.c),s["\u0275\u0275directiveInject"](c.b),s["\u0275\u0275directiveInject"](p.g),s["\u0275\u0275directiveInject"](c.e),s["\u0275\u0275directiveInject"](o.f),s["\u0275\u0275directiveInject"](y.c))},N.\u0275cmp=s["\u0275\u0275defineComponent"]({type:N,selectors:[["app-reports"]],decls:9,vars:2,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-12","title"],[4,"ngIf"],[3,"formGroup"],["appearance","outline",1,"col-md-6"],["matInput","","placeholder","Date","readonly","","name","dateFrom","readonly","","formControlName","dateFrom",3,"matDatepicker","ngModel","ngModelChange"],["matSuffix","",3,"for"],["color","warn","disabled","false"],["dateFrom",""],["matInput","","placeholder","Date","readonly","","name","dateTo","formControlName","dateTo",3,"matDatepicker","ngModel","ngModelChange"],["Date",""],["name","reportType","formControlName","reportType",3,"ngModel","ngModelChange"],[3,"value","click",4,"ngFor","ngForOf"],["class","col-md-6","appearance","outline",4,"ngIf"],[1,"col-md-9"],[1,"col-md-3"],["mat-raised-button","",1,"button-red",3,"disabled","click"],[1,"material-icons","color__white"],[3,"value","click"],["name","paymentType","formControlName","paymentType"],["name","company","formControlName","company"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["name","applicant","formControlName","applicant"],["name","company","formControlName","screener"],["name","medium","formControlName","medium"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"form"),s["\u0275\u0275elementStart"](1,"div",0),s["\u0275\u0275elementStart"](2,"div",1),s["\u0275\u0275elementStart"](3,"div",2),s["\u0275\u0275elementStart"](4,"mat-label"),s["\u0275\u0275text"](5," Reports "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275element"](6,"hr"),s["\u0275\u0275template"](7,w,37,15,"div",3),s["\u0275\u0275template"](8,I,31,10,"div",3),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("ngIf","ROLE_ACCOUNTING"===t.currentUser.userRole.name),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf","ROLE_SUPER_ADMIN"===t.currentUser.userRole.name||"ROLE_ADMIN"===t.currentUser.userRole.name))},directives:[p.J,p.u,p.v,u.g,o.t,p.l,u.c,f.b,p.d,h.h,p.t,p.j,h.j,u.j,h.f,v.a,o.s,T.b,g.m],styles:[""]}),N)}],V=((k=t((function e(){r(this,e)}))).\u0275mod=s["\u0275\u0275defineNgModule"]({type:k}),k.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||k)},imports:[[i.f.forChild(L)],i.f]}),k),U=a("tk/3"),q=((D=t((function e(){r(this,e)}))).\u0275mod=s["\u0275\u0275defineNgModule"]({type:D}),D.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(e){return new(e||D)},imports:[[o.c,V,U.b,p.D,m.k]]}),D)},za27:function(e,n,a){"use strict";a.d(n,"a",(function(){return o}));var o=t((function e(){r(this,e)}))}}])}();